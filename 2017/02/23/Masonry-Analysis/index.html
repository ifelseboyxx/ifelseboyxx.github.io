<!DOCTYPE html>
<html lang="zh-cn">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="Masonry æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ç”¨äºè‡ªåŠ¨å¸ƒå±€ï¼ˆAutoLayoutï¼‰çš„ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼Œä»¥å…¶ç®€æ´çš„ä½¿ç”¨æ–¹å¼ï¼Œå—åˆ°å¹¿å¤§å¼€å‘è€…çš„é’çã€‚æœ¬ç¯‡æ–‡ç« å°†å¸¦ä½ ä¸€æ­¥æ­¥çš„å»äº†è§£å…¶å®ç°åŸç†ï¼ŒçŸ¥å…¶æ‰€ä»¥ç„¶ï¼">
    

    <!--Author-->
    
        <meta name="author" content="ifelseboyxx">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Masonry æºç è§£æ"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="ifelseboyxx&#39;s Blog"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

        <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>Masonry æºç è§£æ - ifelseboyxx&#39;s Blog</title>

    <!-- Bootstrap Core CSS -->
    <link href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Custom Fonts -->
    <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdn.bootcss.com/featherlight/1.7.1/featherlight.min.css" type="text/css" rel="stylesheet">

    <!-- Google Analytics -->
    


    <!-- favicon -->
    
    <link rel="icon" href="/img/red.png">
    
	
</head>


<body>

    <!-- Menu -->
    
        <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">ifelseboyxx {"ğŸ¤¢"}</a>

        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    
                        <li class="previous" title="åˆ©ç”¨å¤šæ€åŠåè®®å¤šé‡ç»§æ‰¿ç»Ÿä¸€æ¥å£æ•°æ®æ ¼å¼">
                            <a href="/2017/04/17/protocol/">&larr; Prev</a>
                        </li>
                    
                </li>
                <li>
                    
                        <li class="next" title="æµ…è°ˆ Method Swizzling">
                            <a href="/2017/01/25/Method-Swizzling/">Next  &rarr;</a>
                        </li>
                    
                </li>

                
                    <li>
                        <a href="/">
                            
                                Home
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives">
                            
                                Archives
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="https://github.com/ifelseboyxx">
                            
                                GitHub
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="https://juejin.im/user/5a421a5ef265da4320038046">
                            
                                æ˜é‡‘
                            
                        </a>
                    </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
    

    <!-- Main Content -->
    <!-- Page Header -->
<!-- Set your background image for this header in your post front-matter: cover -->


<header class="intro-header">
    <div class="container">
    </div>
</header>


<div class="container">
    <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-preview">
                <!-- Title -->
                <a href="/2017/02/23/Masonry-Analysis/">
                    <h2 class="post-title">
                        Masonry æºç è§£æ
                    </h2>
                </a>

                <!-- Tags -->
                
                  
                        <a href="/tags/ObjC/" rel="tag" class="post-tag">
                        ObjC
                      </a>
                  
                        <a href="/tags/æºç è§£æ/" rel="tag" class="post-tag">
                        æºç è§£æ
                      </a>
                  
                

                <p class="post-meta">
                    <!-- Date and Author -->
                    
                    2017-02-23
                </p>
            </div>
            <hr>
        </div>
    </div>
</div>


<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Gallery -->
            

            <!-- Post Main Content -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p><a href="https://github.com/SnapKit/Masonry" target="_blank" rel="external">Masonry</a> æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ç”¨äºè‡ªåŠ¨å¸ƒå±€ï¼ˆAutoLayoutï¼‰çš„ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼Œä»¥å…¶ç®€æ´çš„ä½¿ç”¨æ–¹å¼ï¼Œå—åˆ°å¹¿å¤§å¼€å‘è€…çš„é’çã€‚æœ¬ç¯‡æ–‡ç« å°†å¸¦ä½ ä¸€æ­¥æ­¥çš„å»äº†è§£å…¶å®ç°åŸç†ï¼ŒçŸ¥å…¶æ‰€ä»¥ç„¶ï¼</p>
<a id="more"></a>
<h3 id="ç»“æ„æ¦‚è§ˆ"><a href="#ç»“æ„æ¦‚è§ˆ" class="headerlink" title="ç»“æ„æ¦‚è§ˆ"></a>ç»“æ„æ¦‚è§ˆ</h3><p><img src="http://p0kmbfoc8.bkt.clouddn.com/Snip20171227_1.png" alt=""></p>
<ul>
<li><p>æœ€ä¸Šé¢çš„å‡ ä¸ª <code>category</code>ï¼ŒåŒ…å«äº†æˆ‘ä»¬å¸¸ç”¨çš„ä¸€äº›æ–¹æ³•åŠå±æ€§ï¼Œä¾‹å¦‚ï¼š</p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">NSArray</span> *)mas_makeConstraints:(<span class="keyword">void</span>(<span class="built_in">NS_NOESCAPE</span> ^)(MASConstraintMaker *make))block;</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>ä¸­é—´çš„æ˜¯ä¸€ä¸ªç»§æ‰¿è‡ª <code>NSObject</code> çš„å·¥å‚ç±»ï¼Œä¸»è¦è´Ÿè´£åˆ›å»º <code>MASConstraint</code> å¯¹è±¡ä»¥åŠæŠŠçº¦æŸæ·»åŠ åˆ°è§†å›¾ä¸Šã€‚</p>
</li>
<li><p>æœ€ä¸‹é¢ <code>MASConstraint</code> æ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œå…¶ä¸­æœ‰å¾ˆå¤šçš„æ–¹æ³•éƒ½å¿…é¡»åœ¨å­ç±»ä¸­é‡å†™ã€‚<code>MASViewConstraint</code> å’Œ <code>MASCompositeConstraint</code> æ˜¯å®ƒçš„ä¸¤ä¸ªå­ç±»ï¼Œä»‹ç»è¿™ä¸¤ä¸ªä¹‹å‰æˆ‘ä»¬å…ˆè¯´ä¸‹ <code>MASViewAttribute</code>ï¼š</p>
<p>  æˆ‘ä»¬éƒ½çŸ¥é“ç³»ç»Ÿåˆ›å»ºä¸€æ¡çº¦æŸçš„æ–¹æ³•ï¼š</p>
  <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">+(<span class="keyword">instancetype</span>)constraintWithItem:(<span class="keyword">id</span>)view1</div><div class="line">                       attribute:(<span class="built_in">NSLayoutAttribute</span>)attr1</div><div class="line">                       relatedBy:(<span class="built_in">NSLayoutRelation</span>)relation</div><div class="line">                          toItem:(<span class="keyword">nullable</span> <span class="keyword">id</span>)view2</div><div class="line">                       attribute:(<span class="built_in">NSLayoutAttribute</span>)attr2</div><div class="line">                      multiplier:(<span class="built_in">CGFloat</span>)multiplier</div><div class="line">                        constant:(<span class="built_in">CGFloat</span>)c;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><code>MASViewAttribute</code> å°±æ˜¯å¯¹ <code>attribute</code> å’Œ <code>Item</code> è¿™ä¸¤ä¸ªå±æ€§çš„å°è£…ï¼›<code>MASViewConstraint</code> å°±æ˜¯å¯¹ <code>MASViewAttribute</code> çš„å°è£…ï¼Œå¯ä»¥ç†è§£ä¸º<strong>ä¸€æ¡</strong>çº¦æŸå¯¹è±¡ï¼›<code>MASCompositeConstraint</code> åˆ™å°±æ˜¯çº¦æŸçš„é›†åˆï¼Œå®ƒé‡Œé¢æœ‰ä¸ªç§æœ‰çš„æ•°ç»„ç”¨æ¥å­˜æ”¾å¤šä¸ª <code>MASViewAttribute</code> å¯¹è±¡ã€‚</p>
<h3 id="æºç åˆ†æ"><a href="#æºç åˆ†æ" class="headerlink" title="æºç åˆ†æ"></a>æºç åˆ†æ</h3><h4 id="View-MASAdditions"><a href="#View-MASAdditions" class="headerlink" title="View+MASAdditions"></a>View+MASAdditions</h4><p>æˆ‘ä»¬ç»˜åˆ¶ä¸€ä¸ªå±…äºçˆ¶è§†å›¾ï¼ˆselfï¼‰ä¸Šã€å·¦ä¸º <code>20.0f</code> ï¼Œå³ä¸º <code>-20.0f</code>å¹¶ä¸”é«˜åº¦ä¸€åŠçš„ <code>view</code> çš„çº¦æŸå¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[view mas_makeConstraints:^(MASConstraintMaker *make) &#123;</div><div class="line">	make.height.equalTo(<span class="keyword">self</span>).multipliedBy(<span class="number">0.5</span>);</div><div class="line">    make.top.equalTo(<span class="keyword">self</span>).offset(<span class="number">20.0</span>f);</div><div class="line">    make.left.equalTo(@<span class="number">20.0</span>f);</div><div class="line">    make.right.offset(<span class="number">-20.0</span>f);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ç‚¹è¿› <code>View+MASAdditions.m</code> é‡Œé¢å¯ä»¥çœ‹åˆ°å†…éƒ¨ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">NSArray</span> *)mas_makeConstraints:(<span class="keyword">void</span>(^)(MASConstraintMaker *))block &#123;</div><div class="line">    <span class="keyword">self</span>.translatesAutoresizingMaskIntoConstraints = <span class="literal">NO</span>;</div><div class="line">    MASConstraintMaker *constraintMaker = [[MASConstraintMaker alloc] initWithView:<span class="keyword">self</span>];</div><div class="line">    block(constraintMaker);</div><div class="line">    <span class="keyword">return</span> [constraintMaker install];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>é¦–å…ˆè¿™é‡Œå·²ç»å¸®æˆ‘ä»¬æŠŠ <code>translatesAutoresizingMaskIntoConstraints</code> å±æ€§è®¾ç½®ä¸º <code>NO</code> äº†ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨å¤–é¢å¯ä»¥çœå»è¿™ä¸€æ­¥ã€‚</li>
<li>ç„¶ååˆå§‹åŒ– <code>MASConstraintMaker</code> å·¥å‚å®ä¾‹å¯¹è±¡å¹¶ä¿å­˜äº†å½“å‰è§†å›¾ <code>self.view</code>ã€‚</li>
<li>æ¥ç€æŠŠåˆå§‹åŒ–å¥½çš„ <code>MASConstraintMaker</code> å¯¹è±¡ä¼ å…¥ <code>block</code>ï¼Œå›è°ƒç»™å¤–é¢é…ç½®çº¦æŸå±æ€§ã€‚</li>
<li>æœ€åè°ƒç”¨ <code>install</code> æ–¹æ³•ï¼ŒæŠŠé…ç½®å¥½çš„çº¦æŸæ·»åŠ åˆ°è§†å›¾ä¸Šå»ã€‚</li>
</ul>
<p>ä»¥ä¸Šå°±æ˜¯<strong>æ·»åŠ </strong>çº¦æŸçš„å¤§æ¦‚æµç¨‹ï¼Œæˆ‘ä»¬å†çœ‹çœ‹<strong>æ›´æ–°</strong>å’Œ<strong>é‡æ–°æ„å»º</strong>çº¦æŸçš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">NSArray</span> *)mas_updateConstraints:(<span class="keyword">void</span>(^)(MASConstraintMaker *))block &#123;</div><div class="line">    <span class="keyword">self</span>.translatesAutoresizingMaskIntoConstraints = <span class="literal">NO</span>;</div><div class="line">    MASConstraintMaker *constraintMaker = [[MASConstraintMaker alloc] initWithView:<span class="keyword">self</span>];</div><div class="line">    constraintMaker.updateExisting = <span class="literal">YES</span>;</div><div class="line">    block(constraintMaker);</div><div class="line">    <span class="keyword">return</span> [constraintMaker install];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="built_in">NSArray</span> *)mas_remakeConstraints:(<span class="keyword">void</span>(^)(MASConstraintMaker *make))block &#123;</div><div class="line">    <span class="keyword">self</span>.translatesAutoresizingMaskIntoConstraints = <span class="literal">NO</span>;</div><div class="line">    MASConstraintMaker *constraintMaker = [[MASConstraintMaker alloc] initWithView:<span class="keyword">self</span>];</div><div class="line">    constraintMaker.removeExisting = <span class="literal">YES</span>;</div><div class="line">    block(constraintMaker);</div><div class="line">    <span class="keyword">return</span> [constraintMaker install];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥å‘ç°å®ƒä»¬å’Œ <code>mas_makeConstraints</code> å”¯ä¸€çš„åŒºåˆ«åœ¨äºå¤šä¼ äº† <code>updateExisting</code> ä»¥åŠ <code>removeExisting</code> è¿™ä¸¤ä¸ª <code>BOOL</code>å±æ€§å€¼ï¼š</p>
<ul>
<li><code>mas_updateConstraints</code>ï¼šæ‰¾åˆ°éœ€è¦æ›´æ–°çš„ <code>NSLayoutConstraint</code>ï¼Œæ›¿æ¢æˆæ–°çº¦æŸã€‚</li>
<li><code>mas_remakeConstraints</code>ï¼šæ¸…é™¤æ‰€æœ‰ <code>NSLayoutConstraint</code>ï¼Œå†æ·»åŠ æ–°çº¦æŸã€‚</li>
</ul>
<h4 id="MASConstraintMaker"><a href="#MASConstraintMaker" class="headerlink" title="MASConstraintMaker"></a>MASConstraintMaker</h4><p>çŸ¥é“äº†è¿™ä¸‰ä¸ªæ–¹æ³•çš„å¤§æ¦‚ä½œç”¨å’Œå…³ç³»ï¼Œæˆ‘ä»¬æ¥è¯¦ç»†çœ‹çœ‹ <code>MASConstraintMaker</code> è¿™ä¸ªå·¥å‚ç±»æ˜¯å¦‚ä½•é…ç½®çº¦æŸçš„ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">make.height</div></pre></td></tr></table></figure>
<p>è°ƒç”¨é“¾å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">- (MASConstraint *)height &#123;</div><div class="line">    <span class="keyword">return</span> [<span class="keyword">self</span> addConstraintWithLayoutAttribute:<span class="built_in">NSLayoutAttributeHeight</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (MASConstraint *)addConstraintWithLayoutAttribute:(<span class="built_in">NSLayoutAttribute</span>)layoutAttribute &#123;</div><div class="line">    <span class="keyword">return</span> [<span class="keyword">self</span> constraint:<span class="literal">nil</span> addConstraintWithLayoutAttribute:layoutAttribute];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (MASConstraint *)constraint:(MASConstraint *)constraint addConstraintWithLayoutAttribute:(<span class="built_in">NSLayoutAttribute</span>)layoutAttribute &#123;</div><div class="line">    MASViewAttribute *viewAttribute = [[MASViewAttribute alloc] initWithView:<span class="keyword">self</span>.view layoutAttribute:layoutAttribute];</div><div class="line">    MASViewConstraint *newConstraint = [[MASViewConstraint alloc] initWithFirstViewAttribute:viewAttribute];</div><div class="line">    <span class="keyword">if</span> ([constraint isKindOfClass:MASViewConstraint.class]) &#123; Â·Â·Â· &#125;</div><div class="line">    <span class="keyword">if</span> (!constraint) &#123;</div><div class="line">        newConstraint.delegate = <span class="keyword">self</span>;</div><div class="line">        [<span class="keyword">self</span>.constraints addObject:newConstraint];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> newConstraint;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç”±äº <code>constraint</code> ä¼ çš„æ˜¯ <code>nil</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆå¿½ç•¥ä¸­é—´ä¸€æ®µä»£ç ï¼š</p>
<ul>
<li>è¿™é‡Œå…ˆæ˜¯åˆå§‹åŒ–äº† <code>MASViewAttribute</code> å¯¹è±¡å¹¶ä¿å­˜äº† <code>view</code>ã€<code>item</code>ä»¥åŠ<code>NSLayoutAttribute</code>ä¸‰ä¸ªå±æ€§ã€‚</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">id</span>)initWithView:(MAS_VIEW *)view layoutAttribute:(<span class="built_in">NSLayoutAttribute</span>)layoutAttribute &#123;</div><div class="line">    <span class="keyword">self</span> = [<span class="keyword">self</span> initWithView:view item:view layoutAttribute:layoutAttribute];</div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">id</span>)initWithView:(MAS_VIEW *)view item:(<span class="keyword">id</span>)item layoutAttribute:(<span class="built_in">NSLayoutAttribute</span>)layoutAttribute &#123;</div><div class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</div><div class="line">    <span class="keyword">if</span> (!<span class="keyword">self</span>) <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line">    </div><div class="line">    _view = view;</div><div class="line">    _item = item;</div><div class="line">    _layoutAttribute = layoutAttribute;</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>ç„¶ååˆåˆå§‹åŒ–äº† <code>MASViewConstraint</code> å¯¹è±¡ï¼Œå†…éƒ¨é…ç½®äº†äº›é»˜è®¤å‚æ•°å¹¶ä¿å­˜äº†ç¬¬ä¸€ä¸ªçº¦æŸå‚æ•° <code>MASViewAttribute</code>ã€‚</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">id</span>)initWithFirstViewAttribute:(MASViewAttribute *)firstViewAttribute &#123;</div><div class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</div><div class="line">    <span class="keyword">if</span> (!<span class="keyword">self</span>) <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line">    </div><div class="line">    _firstViewAttribute = firstViewAttribute;</div><div class="line">    <span class="keyword">self</span>.layoutPriority = MASLayoutPriorityRequired;</div><div class="line">    <span class="keyword">self</span>.layoutMultiplier = <span class="number">1</span>;</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>æœ€åè®¾ç½® <code>MASViewConstraint</code> å¯¹è±¡ä»£ç†å¹¶æ·»åŠ åˆ°ä¸€å¼€å§‹å‡†å¤‡å¥½çš„ <code>self.constraints</code> æ•°ç»„ä¸­ï¼Œè¿”å›ã€‚</li>
</ul>
<p>è¿™äº›å·¥ä½œå°±æ˜¯åœ¨è¾“å…¥ <code>make.height</code> è¿›è¡Œçš„å…¨éƒ¨å·¥ä½œï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ª <code>MASViewConstraint</code> å¯¹è±¡ï¼Œç”¨äºä¹‹åçš„ç»§ç»­é…ç½®ã€‚</p>
<h4 id="MASViewConstraint"><a href="#MASViewConstraint" class="headerlink" title="MASViewConstraint"></a>MASViewConstraint</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">make.height.equalTo(<span class="keyword">self</span>)</div></pre></td></tr></table></figure>
<p>åœ¨ <code>make.height</code> è¿”å› <code>MASViewConstraint</code> å¯¹è±¡åï¼Œä¼šç»§ç»­åœ¨è¿™ä¸ªé“¾å¼çš„è¯­æ³•ä¸­è°ƒç”¨ä¸‹ä¸€ä¸ªæ–¹æ³•æ¥æŒ‡å®šçº¦æŸçš„å…³ç³»ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- (MASConstraint * (^)(<span class="keyword">id</span> attr))equalTo;</div><div class="line"></div><div class="line">- (MASConstraint * (^)(<span class="keyword">id</span> attr))greaterThanOrEqualTo;</div><div class="line"></div><div class="line">- (MASConstraint * (^)(<span class="keyword">id</span> attr))lessThanOrEqualTo;</div></pre></td></tr></table></figure>
<p>æ–‡ç« å¼€å¤´è¯´è¿‡ï¼Œ<code>MASConstraint</code> æ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œå…·ä½“å®ç°éƒ½åœ¨å®ƒçš„ä¸¤ä¸ªå­ç±»ä¸­ï¼Œ<code>equalTo(self)</code> çš„è°ƒç”¨é“¾å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//MASConstraint.m</span></div><div class="line"></div><div class="line">- (MASConstraint * (^)(<span class="keyword">id</span>))equalTo &#123;</div><div class="line">    <span class="keyword">return</span> ^<span class="keyword">id</span>(<span class="keyword">id</span> attribute) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.equalToWithRelation(attribute, <span class="built_in">NSLayoutRelationEqual</span>);</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//MASViewConstraint.m</span></div><div class="line"></div><div class="line">- (MASConstraint * (^)(<span class="keyword">id</span>, <span class="built_in">NSLayoutRelation</span>))equalToWithRelation &#123;</div><div class="line">    <span class="keyword">return</span> ^<span class="keyword">id</span>(<span class="keyword">id</span> attribute, <span class="built_in">NSLayoutRelation</span> relation) &#123;</div><div class="line">        <span class="keyword">if</span> ([attribute isKindOfClass:<span class="built_in">NSArray</span>.class]) &#123;</div><div class="line">            .....</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            .....</div><div class="line">            <span class="keyword">self</span>.layoutRelation = relation;</div><div class="line">            <span class="keyword">self</span>.secondViewAttribute = attribute;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡ŒåŒæ ·å…ˆçœç•¥éƒ¨åˆ†ä»£ç ï¼Œæ–¹ä¾¿æˆ‘ä»¬é˜…è¯»ï¼š</p>
<ul>
<li>é¦–å…ˆæ˜¯ <code>self.layoutRelation</code> ä¿å­˜äº†çº¦æŸå…³ç³»ä¸”é‡å†™äº† <code>set</code> æ–¹æ³•ï¼Œåœ¨é‡Œé¢ç”¨ <code>self.hasLayoutRelation</code> è¿™ä¸ª <code>BOOL</code> æ ‡è¯†å·²ç»æœ‰çº¦æŸå…³ç³»ã€‚</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)setLayoutRelation:(<span class="built_in">NSLayoutRelation</span>)layoutRelation &#123;</div><div class="line">	_layoutRelation = layoutRelation;</div><div class="line"> 	<span class="keyword">self</span>.hasLayoutRelation = <span class="literal">YES</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>ç„¶ååŒæ ·æ˜¯é‡å†™äº† <code>self.secondViewAttribute</code> çš„ <code>set</code> æ–¹æ³•ï¼Œè¿™é‡Œä¼šæ ¹æ®ä¸åŒçš„æƒ…å†µåšä¸åŒçš„æ“ä½œã€‚</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)setSecondViewAttribute:(<span class="keyword">id</span>)secondViewAttribute &#123;</div><div class="line">    <span class="keyword">if</span> ([secondViewAttribute isKindOfClass:<span class="built_in">NSValue</span>.class]) &#123;</div><div class="line">        [<span class="keyword">self</span> setLayoutConstantWithValue:secondViewAttribute];</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([secondViewAttribute isKindOfClass:MAS_VIEW.class]) &#123;</div><div class="line">        _secondViewAttribute = [[MASViewAttribute alloc] initWithView:secondViewAttribute layoutAttribute:<span class="keyword">self</span>.firstViewAttribute.layoutAttribute];</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([secondViewAttribute isKindOfClass:MASViewAttribute.class]) &#123;</div><div class="line">        _secondViewAttribute = secondViewAttribute;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="built_in">NSAssert</span>(<span class="literal">NO</span>, <span class="string">@"attempting to add unsupported attribute: %@"</span>, secondViewAttribute);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>ç¬¬ä¸€ç§æƒ…å†µå¯¹åº”çš„æ˜¯ï¼š</strong></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">make.height.equalTo(@<span class="number">20.0</span>f)</div></pre></td></tr></table></figure>
<p>è°ƒç”¨é“¾å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//MASViewConstraint.m</span></div><div class="line"><span class="keyword">if</span> ([secondViewAttribute isKindOfClass:<span class="built_in">NSValue</span>.class]) &#123;</div><div class="line">    [<span class="keyword">self</span> setLayoutConstantWithValue:secondViewAttribute];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//MASConstraint.m</span></div><div class="line">- (<span class="keyword">void</span>)setLayoutConstantWithValue:(<span class="built_in">NSValue</span> *)value &#123;</div><div class="line">    <span class="keyword">if</span> ([value isKindOfClass:<span class="built_in">NSNumber</span>.class]) &#123;</div><div class="line">        <span class="keyword">self</span>.offset = [(<span class="built_in">NSNumber</span> *)value doubleValue];</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (strcmp(value.objCType, <span class="keyword">@encode</span>(<span class="built_in">CGPoint</span>)) == <span class="number">0</span>) &#123;</div><div class="line">        <span class="built_in">CGPoint</span> point;</div><div class="line">        [value getValue:&amp;point];</div><div class="line">        <span class="keyword">self</span>.centerOffset = point;</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (strcmp(value.objCType, <span class="keyword">@encode</span>(<span class="built_in">CGSize</span>)) == <span class="number">0</span>) &#123;</div><div class="line">        <span class="built_in">CGSize</span> size;</div><div class="line">        [value getValue:&amp;size];</div><div class="line">        <span class="keyword">self</span>.sizeOffset = size;</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (strcmp(value.objCType, <span class="keyword">@encode</span>(MASEdgeInsets)) == <span class="number">0</span>) &#123;</div><div class="line">        MASEdgeInsets insets;</div><div class="line">        [value getValue:&amp;insets];</div><div class="line">        <span class="keyword">self</span>.insets = insets;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="built_in">NSAssert</span>(<span class="literal">NO</span>, <span class="string">@"attempting to set layout constant with unsupported value: %@"</span>, value);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//MASViewConstraint.m</span></div><div class="line">- (<span class="keyword">void</span>)setOffset:(<span class="built_in">CGFloat</span>)offset &#123;</div><div class="line">    <span class="keyword">self</span>.layoutConstant = offset;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//MASViewConstraint.m</span></div><div class="line">- (<span class="keyword">void</span>)setLayoutConstant:(<span class="built_in">CGFloat</span>)layoutConstant &#123;</div><div class="line">    _layoutConstant = layoutConstant;</div><div class="line"></div><div class="line"><span class="meta">#if TARGET_OS_MAC &amp;&amp; !(TARGET_OS_IPHONE || TARGET_OS_TV)</span></div><div class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>.useAnimator) &#123;</div><div class="line">        [<span class="keyword">self</span>.layoutConstraint.animator setConstant:layoutConstant];</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">self</span>.layoutConstraint.constant = layoutConstant;</div><div class="line">    &#125;</div><div class="line"><span class="meta">#else</span></div><div class="line">    <span class="keyword">self</span>.layoutConstraint.constant = layoutConstant;</div><div class="line"><span class="meta">#endif</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢åˆ°æœ€åä¼šæœ‰ä¸ª <code>CGFloat</code> ç±»å‹çš„ <code>layoutConstant</code> å±æ€§æ¥ä¿å­˜å€¼ï¼Œå¹¶ä¸”åœ¨æœ€åè°ƒç”¨ <code>install</code> æ–¹æ³•çš„æ—¶å€™ä½œä¸º <code>constant</code> å‚æ•°ä¼ å…¥ã€‚</p>
<p>è¿™é‡Œåªçœ‹äº†ä¸‹ä¼ å…¥çš„ <code>NSValue</code> ä¸º<code>offset</code> çš„æƒ…å†µï¼Œè¿˜æœ‰ <code>centerOffset</code>ã€<code>sizeOffset</code> å’Œ <code>insets</code>ï¼Œä¹Ÿéƒ½å¤§åŒå°å¼‚ï¼Œå°±ä¸ç†¬è¿°äº†ã€‚</p>
<p>å…¶å®è¿™é‡Œæœ‰ä¸€ç‚¹æˆ‘æ²¡æ˜ç™½ï¼š<br>ç›´åˆ°æœ€åè°ƒç”¨ <code>install</code> æ–¹æ³•å‰ï¼Œ<code>self.layoutConstraint</code> è¿™ä¸ª <code>MASLayoutConstraint</code> ç±»å‹çš„å±æ€§éƒ½æ˜¯ <code>nil</code>ï¼Œé‚£ä¹ˆï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">self</span>.layoutConstraint.constant = layoutConstant;</div></pre></td></tr></table></figure>
<blockquote>
<p>è¿™é‡Œçš„èµ‹å€¼åˆæœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿ</p>
</blockquote>
<p><strong>ç¬¬äºŒç§æƒ…å†µä¸€èˆ¬æ˜¯ç›´æ¥ä¼ å…¥ä¸€ä¸ªè§†å›¾ï¼š</strong></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">make.height.equalTo(<span class="keyword">self</span>)</div></pre></td></tr></table></figure>
<p>è¿™æ—¶ï¼Œå°±ä¼šåˆå§‹åŒ–ä¸€ä¸ª <code>layoutAttribute</code> å±æ€§ä¸ <code>firstViewArribute</code> ï¼ˆç¬¬ä¸€ä¸ªçº¦æŸå‚æ•°å¯¹è±¡ï¼‰ç›¸åŒçš„ <code>MASViewAttribute</code> å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ç¬¬äºŒä¸ªçº¦æŸå‚æ•°å¯¹è±¡ï¼Œä¸Šé¢ä»£ç æ„æ€å°±æ˜¯ä½¿è§†å›¾ä¸ <code>self</code> é«˜åº¦ç›¸ç­‰ã€‚</p>
<p><strong>ç¬¬ä¸‰ç§æƒ…å†µä¼šä¼ å…¥ä¸€ä¸ªè§†å›¾çš„ <code>MASViewAttribute</code>ï¼š</strong></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">make.height.equalTo(<span class="keyword">self</span>.height)</div><div class="line"><span class="comment">//æˆ–è€…</span></div><div class="line">make.height.equalTo(<span class="keyword">self</span>.mas_height)</div></pre></td></tr></table></figure>
<p>è¿™ä¸¤ç§å†™æ³•å…¶å®æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ª <code>MASViewAttribute</code> å¯¹è±¡ã€‚<code>View+MASShorthandAdditions.h</code> è¿™ä¸ª <code>category</code> åªæœ‰ä¸ª <code>.h</code>ï¼Œå®šä¹‰äº†æˆ‘ä»¬å¸¸ç”¨çš„å±æ€§å’Œæ–¹æ³•ï¼Œä½†æ˜¯å…·ä½“å®ç°è¿˜æ˜¯è°ƒç”¨çš„ <code>View+MASAdditions</code> é‡Œé¢çš„æ–¹æ³•ï¼Œå¯ä»¥ç†è§£ä¸ºå»æ‰ <code>mas_</code> å‘½åå‰ç¼€ã€‚</p>
<p>è¿™é‡Œè¿˜æœ‰è®¸å¤šå±æ€§å¯ä»¥è®¾ç½®ï¼Œæ¯”å¦‚ <code>multipliedBy</code>ã€<code>priority</code>ç­‰ç­‰ï¼Œå°±ä¸ä¸€ä¸€ç†¬è¿°äº†ã€‚</p>
<h4 id="é“¾å¼è¯­æ³•ç‰¹æ€§çš„é‡è¦ä¸€ç¯"><a href="#é“¾å¼è¯­æ³•ç‰¹æ€§çš„é‡è¦ä¸€ç¯" class="headerlink" title="é“¾å¼è¯­æ³•ç‰¹æ€§çš„é‡è¦ä¸€ç¯"></a>é“¾å¼è¯­æ³•ç‰¹æ€§çš„é‡è¦ä¸€ç¯</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">make.height.width.equalTo(@<span class="number">20</span>);</div></pre></td></tr></table></figure>
<p>è¿™ç§åŒæ—¶è®¾ç½®å¤šä¸ªçº¦æŸå±æ€§çš„æ–¹å¼ç›¸ä¿¡å¤§å®¶ä¸€å®šä¸é™Œç”Ÿï¼Œè®¤çœŸçœ‹çš„äººå¯èƒ½å·²ç»çŒœåˆ°äº†ï¼šé‚£å°±æ˜¯é€šè¿‡ <code>delegate</code> çš„æ–¹å¼ã€‚</p>
<p>ä¸Šé¢å·²ç»æåˆ°è¿‡ï¼Œåœ¨ <code>make.height</code> è®¾ç½®ç¬¬ä¸€ä¸ªçº¦æŸå±æ€§æ—¶ï¼Œ</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (MASConstraint *)constraint:(MASConstraint *)constraint addConstraintWithLayoutAttribute:(<span class="built_in">NSLayoutAttribute</span>)layoutAttribute</div></pre></td></tr></table></figure>
<p>æ–¹æ³•ä¸­ï¼Œä¼šè®¾ç½® <code>MASViewConstraint</code> å¯¹è±¡ä»£ç†ï¼Œå…¶ä½œç”¨å°±æ˜¯ä¸ºäº†èƒ½å¤ŸåŒæ—¶è®¾ç½®å¤šä¸ªçº¦æŸå±æ€§ï¼æˆ‘ä»¬æ¥çœ‹çœ‹ <code>make.height.width</code> ä¸­ <code>.width</code>çš„è°ƒç”¨é“¾ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//MASConstraint.m</span></div><div class="line"></div><div class="line">- (MASConstraint *)width &#123;</div><div class="line">    <span class="keyword">return</span> [<span class="keyword">self</span> addConstraintWithLayoutAttribute:<span class="built_in">NSLayoutAttributeWidth</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//MASViewConstraint.m</span></div><div class="line"></div><div class="line">- (MASConstraint *)addConstraintWithLayoutAttribute:(<span class="built_in">NSLayoutAttribute</span>)layoutAttribute &#123;</div><div class="line">    <span class="built_in">NSAssert</span>(!<span class="keyword">self</span>.hasLayoutRelation, <span class="string">@"Attributes should be chained before defining the constraint relation"</span>);</div><div class="line"></div><div class="line">    <span class="keyword">return</span> [<span class="keyword">self</span>.delegate constraint:<span class="keyword">self</span> addConstraintWithLayoutAttribute:layoutAttribute];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//MASConstraintMaker.m</span></div><div class="line">- (MASConstraint *)constraint:(MASConstraint *)constraint addConstraintWithLayoutAttribute:(<span class="built_in">NSLayoutAttribute</span>)layoutAttribute &#123;</div><div class="line">	MASViewAttribute *viewAttribute = [[MASViewAttribute alloc] initWithView:<span class="keyword">self</span>.view layoutAttribute:layoutAttribute];</div><div class="line">    MASViewConstraint *newConstraint = [[MASViewConstraint alloc] initWithFirstViewAttribute:viewAttribute];</div><div class="line">    <span class="keyword">if</span> ([constraint isKindOfClass:MASViewConstraint.class]) &#123;</div><div class="line">        <span class="comment">//replace with composite constraint</span></div><div class="line">        <span class="built_in">NSArray</span> *children = @[constraint, newConstraint];</div><div class="line">        MASCompositeConstraint *compositeConstraint = [[MASCompositeConstraint alloc] initWithChildren:children];</div><div class="line">        compositeConstraint.delegate = <span class="keyword">self</span>;</div><div class="line">        [<span class="keyword">self</span> constraint:constraint shouldBeReplacedWithConstraint:compositeConstraint];</div><div class="line">        <span class="keyword">return</span> compositeConstraint;</div><div class="line">    &#125;</div><div class="line">    ....</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é€šè¿‡ä¸Šé¢çš„è°ƒç”¨é“¾æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œæœ€ç»ˆå°±æ˜¯é€šè¿‡ <code>delegate</code> çš„æ–¹å¼ï¼Œè°ƒç”¨ <code>MASConstraintMaker</code> å·¥å‚ç±»ä¸­çš„ <code>constraint:addConstraintWithLayoutAttribute:</code> æ–¹æ³•ï¼Œè¿™ä¹Ÿæ˜¯é“¾å¼è¯­æ³•èƒ½é“¾èµ·æ¥çš„åŸå› ã€‚</p>
<p>æˆ‘ä»¬è¿˜å¯ä»¥å‘ç°å› ä¸º <code>constraint</code> ä¸ä¸º <code>nil</code>ï¼Œæ‰€ä»¥è¿™æ¬¡åˆå§‹åŒ–å¹¶è¿”å›çš„ä¸æ˜¯ <code>MASViewConstraint</code> å¯¹è±¡ï¼Œè€Œæ˜¯ <code>MASCompositeConstraint</code> è¿™ä¸ªå¯¹è±¡äº†ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªç±»ã€‚</p>
<h4 id="MASCompositeConstraint"><a href="#MASCompositeConstraint" class="headerlink" title="MASCompositeConstraint"></a>MASCompositeConstraint</h4><p>æˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸‹å¼€å¤´æ˜¯æ€ä¹ˆä»‹ç» <code>MASCompositeConstraint</code> è¿™ä¸ªç±»çš„ï¼šâ€œ<code>MASCompositeConstraint</code> æ˜¯çº¦æŸçš„é›†åˆï¼Œå®ƒé‡Œé¢æœ‰ä¸ªç§æœ‰çš„æ•°ç»„ç”¨æ¥å­˜æ”¾å¤šä¸ª MASViewAttribute å¯¹è±¡â€ã€‚</p>
<p>æˆ‘ä»¬æ¥ç€ä¸Šé¢çš„ä¾‹å­çœ‹ï¼š</p>
<h5 id="make-height-width-equalTo-20"><a href="#make-height-width-equalTo-20" class="headerlink" title="make.height.width.equalTo(@20)"></a>make.height.width.equalTo(@20)</h5><p>å½“èµ°åˆ° <code>.width</code>æ—¶ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">- (MASConstraint *)constraint:(MASConstraint *)constraint addConstraintWithLayoutAttribute:(<span class="built_in">NSLayoutAttribute</span>)layoutAttribute &#123;</div><div class="line">    MASViewAttribute *viewAttribute = [[MASViewAttribute alloc] initWithView:<span class="keyword">self</span>.view layoutAttribute:layoutAttribute];</div><div class="line">    MASViewConstraint *newConstraint = [[MASViewConstraint alloc] initWithFirstViewAttribute:viewAttribute];</div><div class="line">    <span class="keyword">if</span> ([constraint isKindOfClass:MASViewConstraint.class]) &#123;</div><div class="line">        <span class="comment">//replace with composite constraint</span></div><div class="line">        <span class="built_in">NSArray</span> *children = @[constraint, newConstraint];</div><div class="line">        MASCompositeConstraint *compositeConstraint = [[MASCompositeConstraint alloc] initWithChildren:children];</div><div class="line">        compositeConstraint.delegate = <span class="keyword">self</span>;</div><div class="line">        [<span class="keyword">self</span> constraint:constraint shouldBeReplacedWithConstraint:compositeConstraint];</div><div class="line">        <span class="keyword">return</span> compositeConstraint;</div><div class="line">    &#125;</div><div class="line">   ....</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆåŠŸçš„èµ°è¿› <code>if</code> åˆ¤è¯»é‡Œé¢ï¼Œå°† <code>.height.wight</code> ä¸¤æ¡çº¦æŸ <code>MASViewConstraint</code> å¯¹è±¡å¡åˆ°æ•°ç»„é‡Œï¼Œåˆ›å»º <code>MASCompositeConstraint</code> å¯¹è±¡ï¼Œå¹¶ä¸”åŒæ ·è®¾ç½®äº† <code>delegate</code>ï¼Œæœ€åè¿˜æŠŠ <code>self.constraints</code> é‡Œé¢äº‹å…ˆæ·»åŠ å¥½çš„çº¦æŸ <code>MASViewConstraint</code> å¯¹è±¡æ›¿æ¢æˆäº† <code>MASCompositeConstraint</code> å¯¹è±¡ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)constraint:(MASConstraint *)constraint shouldBeReplacedWithConstraint:(MASConstraint *)replacementConstraint &#123;</div><div class="line">    <span class="built_in">NSUInteger</span> index = [<span class="keyword">self</span>.constraints indexOfObject:constraint];</div><div class="line">    <span class="built_in">NSAssert</span>(index != <span class="built_in">NSNotFound</span>, <span class="string">@"Could not find constraint %@"</span>, constraint);</div><div class="line">    [<span class="keyword">self</span>.constraints replaceObjectAtIndex:index withObject:replacementConstraint];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥ç‚¹å‡» <code>MASCompositeConstraint</code> åˆå§‹åŒ–æ–¹æ³•é‡Œçœ‹çœ‹ï¼Œå®ƒå†…éƒ¨ä¼šé€šè¿‡ <code>for</code> å¾ªç¯ï¼ŒæŠŠæ•°ç»„é‡Œé¢çš„<strong>æ‰€æœ‰</strong> <code>MASViewConstraint</code> å¯¹è±¡åŒæ ·è®¾ç½®äº† <code>delegate</code>ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">id</span>)initWithChildren:(<span class="built_in">NSArray</span> *)children &#123;</div><div class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</div><div class="line">    <span class="keyword">if</span> (!<span class="keyword">self</span>) <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line"></div><div class="line">    _childConstraints = [children mutableCopy];</div><div class="line">    <span class="keyword">for</span> (MASConstraint *constraint <span class="keyword">in</span> _childConstraints) &#123;</div><div class="line">        constraint.delegate = <span class="keyword">self</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¹ˆåšçš„ç›®çš„åŒæ—¶æ˜¯ä¸ºäº†èƒ½å¤Ÿç»§ç»­é“¾å¼è°ƒç”¨ï¼Œæ¯”å¦‚æˆ‘ä»¬å†åŠ ä¸ª <code>.left</code>ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">make.height.width.left.equalTo(@<span class="number">20</span>);</div></pre></td></tr></table></figure>
<p>è¿™æ—¶å€™çš„è°ƒç”¨é“¾å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//MASConstraint.m</span></div><div class="line"></div><div class="line">- (MASConstraint *)left &#123;</div><div class="line">    <span class="keyword">return</span> [<span class="keyword">self</span> addConstraintWithLayoutAttribute:<span class="built_in">NSLayoutAttributeLeft</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//MASCompositeConstraint.m</span></div><div class="line"></div><div class="line">- (MASConstraint *)addConstraintWithLayoutAttribute:(<span class="built_in">NSLayoutAttribute</span>)layoutAttribute &#123;</div><div class="line">    [<span class="keyword">self</span> constraint:<span class="keyword">self</span> addConstraintWithLayoutAttribute:layoutAttribute];</div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (MASConstraint *)constraint:(MASConstraint __unused *)constraint addConstraintWithLayoutAttribute:(<span class="built_in">NSLayoutAttribute</span>)layoutAttribute &#123;</div><div class="line">    <span class="keyword">id</span>&lt;MASConstraintDelegate&gt; strongDelegate = <span class="keyword">self</span>.delegate;</div><div class="line">    MASConstraint *newConstraint = [strongDelegate constraint:<span class="keyword">self</span> addConstraintWithLayoutAttribute:layoutAttribute];</div><div class="line">    newConstraint.delegate = <span class="keyword">self</span>;</div><div class="line">    [<span class="keyword">self</span>.childConstraints addObject:newConstraint];</div><div class="line">    <span class="keyword">return</span> newConstraint;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¯ä»¥å‘ç°ï¼Œè¿™é‡Œåˆæ˜¯é€šè¿‡ <code>delegate</code> æ–¹å¼ï¼Œè°ƒç”¨ <code>MASConstraintMaker</code> å·¥å‚ç±»ä¸­çš„ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">- (MASConstraint *)constraint:(MASConstraint *)constraint addConstraintWithLayoutAttribute:(<span class="built_in">NSLayoutAttribute</span>)layoutAttribute &#123;</div><div class="line">    MASViewAttribute *viewAttribute = [[MASViewAttribute alloc] initWithView:<span class="keyword">self</span>.view layoutAttribute:layoutAttribute];</div><div class="line">    MASViewConstraint *newConstraint = [[MASViewConstraint alloc] initWithFirstViewAttribute:viewAttribute];</div><div class="line">    </div><div class="line">    ....</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> newConstraint;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸è¿‡è¿™æ¬¡ä»…ä»…æ˜¯åˆå§‹åŒ–äº†ä¸ª <code>MASViewConstraint</code> å¯¹è±¡å°±ç›´æ¥è¿”å›äº†ï¼Œç„¶åå›åˆ°ä¸Šä¸ªæ–¹æ³•ä¸­æ·»åŠ åˆ° <code>MASCompositeConstraint</code> çš„ç§æœ‰æ•°ç»„ <code>self.childConstraints</code> ä¸­è¿”å›å¤‡ç”¨ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">equalTo(@<span class="number">20</span>)</div></pre></td></tr></table></figure>
<p>å› ä¸ºåˆ°<code>.left</code> æ—¶ï¼Œè¿”å›çš„æ˜¯ <code>MASCompositeConstraint</code> å¯¹è±¡ï¼Œåˆ°è¿™ä¸€æ­¥çš„æ—¶å€™ä¼šæœ‰ç‚¹å˜åŒ–ï¼Œè°ƒç”¨é“¾å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//MASConstraint.m</span></div><div class="line"></div><div class="line">- (MASConstraint * (^)(<span class="keyword">id</span>))equalTo &#123;</div><div class="line">    <span class="keyword">return</span> ^<span class="keyword">id</span>(<span class="keyword">id</span> attribute) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.equalToWithRelation(attribute, <span class="built_in">NSLayoutRelationEqual</span>);</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//MASCompositeConstraint.m</span></div><div class="line"></div><div class="line">- (MASConstraint * (^)(<span class="keyword">id</span>, <span class="built_in">NSLayoutRelation</span>))equalToWithRelation &#123;</div><div class="line">    <span class="keyword">return</span> ^<span class="keyword">id</span>(<span class="keyword">id</span> attr, <span class="built_in">NSLayoutRelation</span> relation) &#123;</div><div class="line">        <span class="keyword">for</span> (MASConstraint *constraint <span class="keyword">in</span> <span class="keyword">self</span>.childConstraints.copy) &#123;</div><div class="line">            constraint.equalToWithRelation(attr, relation);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¯ä»¥å‘ç°ï¼Œè¿™é‡Œä¼šå¾ªç¯ä¹‹å‰å‡†å¤‡å¥½çš„ç§æœ‰æ•°ç»„ <code>self.childConstraints</code>ï¼Œè°ƒç”¨ <code>MASViewConstraint.m</code> çš„ <code>equalToWithRelation</code> æ–¹æ³•ï¼Œå’Œä¸Šé¢è®²çš„ä¸€æ ·äº†ã€‚</p>
<h5 id="make-edges-equalTo-view"><a href="#make-edges-equalTo-view" class="headerlink" title="make.edges.equalTo(view)"></a>make.edges.equalTo(view)</h5><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹è¿™ç§å†™æ³•ï¼Œè°ƒç”¨é“¾å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//MASConstraintMaker.m</span></div><div class="line"></div><div class="line">- (MASConstraint *)edges &#123;</div><div class="line">    <span class="keyword">return</span> [<span class="keyword">self</span> addConstraintWithAttributes:MASAttributeTop | MASAttributeLeft | MASAttributeRight | MASAttributeBottom];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (MASConstraint *)addConstraintWithAttributes:(MASAttribute)attrs &#123;</div><div class="line">    __unused MASAttribute anyAttribute = (MASAttributeLeft | MASAttributeRight | MASAttributeTop | MASAttributeBottom | MASAttributeLeading</div><div class="line">                                          | MASAttributeTrailing | MASAttributeWidth | MASAttributeHeight | MASAttributeCenterX</div><div class="line">                                          | MASAttributeCenterY | </div><div class="line">                                          </div><div class="line">                    ......</div><div class="line">                        </div><div class="line">    <span class="built_in">NSMutableArray</span> *attributes = [<span class="built_in">NSMutableArray</span> array];</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> (attrs &amp; MASAttributeLeft) [attributes addObject:<span class="keyword">self</span>.view.mas_left];</div><div class="line">    <span class="keyword">if</span> (attrs &amp; MASAttributeRight) [attributes addObject:<span class="keyword">self</span>.view.mas_right];</div><div class="line">    <span class="keyword">if</span> (attrs &amp; MASAttributeTop) [attributes addObject:<span class="keyword">self</span>.view.mas_top];</div><div class="line">    </div><div class="line">    				......    </div><div class="line">    </div><div class="line">    <span class="built_in">NSMutableArray</span> *children = [<span class="built_in">NSMutableArray</span> arrayWithCapacity:attributes.count];</div><div class="line">    </div><div class="line">    <span class="keyword">for</span> (MASViewAttribute *a <span class="keyword">in</span> attributes) &#123;</div><div class="line">        [children addObject:[[MASViewConstraint alloc] initWithFirstViewAttribute:a]];</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    MASCompositeConstraint *constraint = [[MASCompositeConstraint alloc] initWithChildren:children];</div><div class="line">    constraint.delegate = <span class="keyword">self</span>;</div><div class="line">    [<span class="keyword">self</span>.constraints addObject:constraint];</div><div class="line">    <span class="keyword">return</span> constraint;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä»£ç å¤ªå¤šçœç•¥äº†ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥å‘ç°è¿™æ®µä»£ç ä½œç”¨å°±æ˜¯è¿”å›ä¸€ä¸ªåŒ…å«å¤šæ¡çº¦æŸçš„ <code>MASCompositeConstraint</code> å¯¹è±¡ï¼Œæ¥ç€åé¢çš„æ“ä½œä¹Ÿéƒ½æ˜¯ä¸€æ ·çš„äº†ã€‚</p>
<p>ä¸Šé¢è¿™ç§å†™æ³•è¿˜å¯ä»¥è¿™æ ·ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">make.edges.equalTo(<span class="built_in">UIEdgeInsetsMake</span>(<span class="number">0.0</span>f, <span class="number">0.0</span>f, <span class="number">0.0</span>f, <span class="number">0.0</span>f));</div></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„ <code>equalTo</code> éœ€è¦æ³¨æ„ä¸‹ï¼Œå®ƒæ˜¯ä¸€ä¸ª<strong>å®</strong>ï¼Œå®šä¹‰åœ¨ <code>MASConstraint.h</code> ä¸­ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#define mas_equalTo(...)                 equalTo(MASBoxValue((__VA_ARGS__)))</span></div><div class="line"><span class="meta">#define mas_greaterThanOrEqualTo(...)    greaterThanOrEqualTo(MASBoxValue((__VA_ARGS__)))</span></div><div class="line"><span class="meta">#define mas_lessThanOrEqualTo(...)       lessThanOrEqualTo(MASBoxValue((__VA_ARGS__)))</span></div><div class="line"></div><div class="line"><span class="meta">#define mas_offset(...)                  valueOffset(MASBoxValue((__VA_ARGS__)))</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="meta">#ifdef MAS_SHORTHAND_GLOBALS</span></div><div class="line"></div><div class="line"><span class="meta">#define equalTo(...)                     mas_equalTo(__VA_ARGS__)</span></div><div class="line"><span class="meta">#define greaterThanOrEqualTo(...)        mas_greaterThanOrEqualTo(__VA_ARGS__)</span></div><div class="line"><span class="meta">#define lessThanOrEqualTo(...)           mas_lessThanOrEqualTo(__VA_ARGS__)</span></div><div class="line"></div><div class="line"><span class="meta">#define offset(...)                      mas_offset(__VA_ARGS__)</span></div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æ¥ä¿®æ”¹ä¸‹ä»£ç ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">make.edges.equalTo(MASBoxValue(<span class="built_in">UIEdgeInsetsMake</span>(<span class="number">0.0</span>f, <span class="number">0.0</span>f, <span class="number">0.0</span>f, <span class="number">0.0</span>f)));</div></pre></td></tr></table></figure>
<p>å¯ä»¥å‘ç°ï¼Œå…¶å®é‡Œé¢è°ƒç”¨çš„æ˜¯ <code>MASBoxValue</code> è¿™ä¸ªå®ï¼Œå®ƒå°† <code>C</code> å’Œ <code>Objective-C</code> è¯­è¨€ä¸­çš„ä¸€äº›åŸºæœ¬æ•°æ®ç»“æ„æ¯”å¦‚è¯´ <code>double</code> <code>CGPoint</code> <code>CGSize</code> è¿™äº›å€¼ç”¨ <code>NSValue</code> è¿›è¡ŒåŒ…è£…ã€‚</p>
<p>è¿™é‡Œè¿˜æ”¯æŒç›´æ¥è°ƒç”¨ <code>size</code>ã€<code>center</code> ç­‰ï¼Œå…·ä½“å®ç°éƒ½å·®ä¸å¤šï¼Œå°±ä¸ç†¬è¿°äº†ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">make.center.equalTo(<span class="built_in">CGPointMake</span>(<span class="number">0</span>, <span class="number">50</span>));</div><div class="line">make.size.equalTo(<span class="built_in">CGSizeMake</span>(<span class="number">200</span>, <span class="number">100</span>));</div></pre></td></tr></table></figure>
<h5 id="make-height-equalTo-redView-blueView"><a href="#make-height-equalTo-redView-blueView" class="headerlink" title="make.height.equalTo(@[redView, blueView])"></a>make.height.equalTo(@[redView, blueView])</h5><p>æˆ‘å†æ¥çœ‹çœ‹è¿™ç§ä¼ æ•°ç»„çš„ï¼Œåœ¨èµ°åˆ° <code>.equalTo</code> æ—¶ï¼Œæœ€ç»ˆä¼šè°ƒç”¨ <code>MASViewConstraint.m</code> é‡Œé¢çš„ <code>equalToWithRelation</code> æ–¹æ³•ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">- (MASConstraint * (^)(<span class="keyword">id</span>, <span class="built_in">NSLayoutRelation</span>))equalToWithRelation &#123;</div><div class="line">    <span class="keyword">return</span> ^<span class="keyword">id</span>(<span class="keyword">id</span> attribute, <span class="built_in">NSLayoutRelation</span> relation) &#123;</div><div class="line">        <span class="keyword">if</span> ([attribute isKindOfClass:<span class="built_in">NSArray</span>.class]) &#123;</div><div class="line">            <span class="built_in">NSAssert</span>(!<span class="keyword">self</span>.hasLayoutRelation, <span class="string">@"Redefinition of constraint relation"</span>);</div><div class="line">            <span class="built_in">NSMutableArray</span> *children = <span class="built_in">NSMutableArray</span>.new;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">id</span> attr <span class="keyword">in</span> attribute) &#123;</div><div class="line">                MASViewConstraint *viewConstraint = [<span class="keyword">self</span> <span class="keyword">copy</span>];</div><div class="line">                viewConstraint.layoutRelation = relation;</div><div class="line">                viewConstraint.secondViewAttribute = attr;</div><div class="line">                [children addObject:viewConstraint];</div><div class="line">            &#125;</div><div class="line">            MASCompositeConstraint *compositeConstraint = [[MASCompositeConstraint alloc] initWithChildren:children];</div><div class="line">            compositeConstraint.delegate = <span class="keyword">self</span>.delegate;</div><div class="line">            [<span class="keyword">self</span>.delegate constraint:<span class="keyword">self</span> shouldBeReplacedWithConstraint:compositeConstraint];</div><div class="line">            <span class="keyword">return</span> compositeConstraint;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;   ....    &#125;</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™è¾¹è¿˜æ˜¯éå†æ•°ç»„ï¼Œå¹¶ä¸” <code>MASViewConstraint</code> å®ç° <code>NSCopying</code> åè®®ï¼Œè°ƒç”¨ <code>[self copy]</code> ä¼šåˆ›å»º <code>MASViewConstraint</code> å¯¹è±¡ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">id</span>)copyWithZone:(<span class="built_in">NSZone</span> __unused *)zone &#123;</div><div class="line">    MASViewConstraint *constraint = [[MASViewConstraint alloc] initWithFirstViewAttribute:<span class="keyword">self</span>.firstViewAttribute];</div><div class="line">    constraint.layoutConstant = <span class="keyword">self</span>.layoutConstant;</div><div class="line">    constraint.layoutRelation = <span class="keyword">self</span>.layoutRelation;</div><div class="line">    constraint.layoutPriority = <span class="keyword">self</span>.layoutPriority;</div><div class="line">    constraint.layoutMultiplier = <span class="keyword">self</span>.layoutMultiplier;</div><div class="line">    constraint.delegate = <span class="keyword">self</span>.delegate;</div><div class="line">    <span class="keyword">return</span> constraint;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç„¶åä¼šæ ¹æ®ä¼ çš„æ•°ç»„é‡Œé¢çš„ <code>Value</code> ç±»å‹æ¥åšä¸åŒçš„æ“ä½œï¼Œå‰é¢è®²è¿‡å°±ä¸ç†¬è¿°äº†ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)setSecondViewAttribute:(<span class="keyword">id</span>)secondViewAttribute &#123;</div><div class="line">    <span class="keyword">if</span> ([secondViewAttribute isKindOfClass:<span class="built_in">NSValue</span>.class]) &#123;</div><div class="line">        [<span class="keyword">self</span> setLayoutConstantWithValue:secondViewAttribute];</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([secondViewAttribute isKindOfClass:MAS_VIEW.class]) &#123;</div><div class="line">        _secondViewAttribute = [[MASViewAttribute alloc] initWithView:secondViewAttribute layoutAttribute:<span class="keyword">self</span>.firstViewAttribute.layoutAttribute];</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([secondViewAttribute isKindOfClass:MASViewAttribute.class]) &#123;</div><div class="line">        _secondViewAttribute = secondViewAttribute;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="built_in">NSAssert</span>(<span class="literal">NO</span>, <span class="string">@"attempting to add unsupported attribute: %@"</span>, secondViewAttribute);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æœ€åä¾¿æ˜¯ç”Ÿæˆ <code>MASCompositeConstraint</code> å¯¹è±¡ï¼Œå¹¶é€šè¿‡ <code>delegate</code> æ–¹å¼ï¼Œè°ƒç”¨ <code>MASConstraintMaker</code> çš„æ–¹æ³•ï¼Œæ›¿æ¢ <code>self.constraints</code> æ•°ç»„é‡Œçš„çº¦æŸï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)constraint:(MASConstraint *)constraint shouldBeReplacedWithConstraint:(MASConstraint *)replacementConstraint &#123;</div><div class="line">    <span class="built_in">NSUInteger</span> index = [<span class="keyword">self</span>.constraints indexOfObject:constraint];</div><div class="line">    <span class="built_in">NSAssert</span>(index != <span class="built_in">NSNotFound</span>, <span class="string">@"Could not find constraint %@"</span>, constraint);</div><div class="line">    [<span class="keyword">self</span>.constraints replaceObjectAtIndex:index withObject:replacementConstraint];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="æ·»åŠ çº¦æŸåˆ°è§†å›¾"><a href="#æ·»åŠ çº¦æŸåˆ°è§†å›¾" class="headerlink" title="æ·»åŠ çº¦æŸåˆ°è§†å›¾"></a>æ·»åŠ çº¦æŸåˆ°è§†å›¾</h4><p> <code>mas_makeConstraints</code> æ–¹æ³•çš„æœ€åä¼šè°ƒç”¨ <code>[constraintMaker install]</code> æ–¹æ³•æ¥æ·»åŠ æ‰€æœ‰å­˜å‚¨åœ¨ <code>self.constraints</code> æ•°ç»„ä¸­çš„æ‰€æœ‰çº¦æŸã€‚</p>
 <figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">// MASConstraintMaker.m</span></div><div class="line"> </div><div class="line"> - (<span class="built_in">NSArray</span> *)install &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>.removeExisting) &#123;</div><div class="line">        <span class="built_in">NSArray</span> *installedConstraints = [MASViewConstraint installedConstraintsForView:<span class="keyword">self</span>.view];</div><div class="line">        <span class="keyword">for</span> (MASConstraint *constraint <span class="keyword">in</span> installedConstraints) &#123;</div><div class="line">            [constraint uninstall];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">NSArray</span> *constraints = <span class="keyword">self</span>.constraints.copy;</div><div class="line">    <span class="keyword">for</span> (MASConstraint *constraint <span class="keyword">in</span> constraints) &#123;</div><div class="line">        constraint.updateExisting = <span class="keyword">self</span>.updateExisting;</div><div class="line">        [constraint install];</div><div class="line">    &#125;</div><div class="line">    [<span class="keyword">self</span>.constraints removeAllObjects];</div><div class="line">    <span class="keyword">return</span> constraints;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p> å¦‚æœéœ€è¦<strong>é‡æ–°æ„å»º</strong>çº¦æŸï¼Œä¹Ÿå°±æ˜¯ è°ƒç”¨ <code>mas_remakeConstraints:</code> æ–¹æ³•ï¼Œä¼šå…ˆå–å‡ºè§†å›¾çš„æ‰€æœ‰çº¦æŸï¼Œç„¶åé€šè¿‡ä¸€ä¸ª <code>for</code> å¾ªç¯ï¼Œè°ƒç”¨ <code>uninstall</code> æ¥æ¸…ç©ºæ‰€æœ‰çº¦æŸï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)uninstall &#123;</div><div class="line">    <span class="keyword">if</span> ([<span class="keyword">self</span> supportsActiveProperty]) &#123;</div><div class="line">        <span class="keyword">self</span>.layoutConstraint.active = <span class="literal">NO</span>;</div><div class="line">        [<span class="keyword">self</span>.firstViewAttribute.view.mas_installedConstraints removeObject:<span class="keyword">self</span>];</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    [<span class="keyword">self</span>.installedView removeConstraint:<span class="keyword">self</span>.layoutConstraint];</div><div class="line">    <span class="keyword">self</span>.layoutConstraint = <span class="literal">nil</span>;</div><div class="line">    <span class="keyword">self</span>.installedView = <span class="literal">nil</span>;</div><div class="line">    </div><div class="line">    [<span class="keyword">self</span>.firstViewAttribute.view.mas_installedConstraints removeObject:<span class="keyword">self</span>];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœä¸éœ€è¦<strong>é‡æ–°æ„å»º</strong>çº¦æŸï¼Œä¼šå–å‡º <code>self.constraints</code> æ•°ç»„ä¸­å‡†å¤‡å¥½çš„çº¦æŸï¼Œé€šè¿‡ <code>for</code> å¾ªç¯ï¼Œè°ƒç”¨ <code>install</code> æ¥æŠŠçº¦æŸæ·»åŠ åˆ°è§†å›¾ä¸Šï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="keyword">self</span>.hasBeenInstalled) &#123;</div><div class="line">      <span class="keyword">return</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœçº¦æŸä»¥åŠå­˜åœ¨å¹¶æ˜¯ <code>active</code> ä¼šç›´æ¥è¿”å›ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> ([<span class="keyword">self</span> supportsActiveProperty] &amp;&amp; <span class="keyword">self</span>.layoutConstraint) &#123;</div><div class="line">     <span class="keyword">self</span>.layoutConstraint.active = <span class="literal">YES</span>;</div><div class="line">     [<span class="keyword">self</span>.firstViewAttribute.view.mas_installedConstraints addObject:<span class="keyword">self</span>];</div><div class="line">     <span class="keyword">return</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœ <code>self.layoutConstraint</code> å“åº”äº† <code>isActive</code> æ–¹æ³•å¹¶ä¸”ä¸ä¸ºç©ºï¼Œä¼šæ¿€æ´»è¿™æ¡çº¦æŸå¹¶æ·»åŠ åˆ° <code>mas_installedConstraints</code> æ•°ç»„ä¸­ï¼Œæœ€åè¿”å›ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">MAS_VIEW *firstLayoutItem = <span class="keyword">self</span>.firstViewAttribute.item;</div><div class="line"><span class="built_in">NSLayoutAttribute</span> firstLayoutAttribute = <span class="keyword">self</span>.firstViewAttribute.layoutAttribute;</div><div class="line">MAS_VIEW *secondLayoutItem = <span class="keyword">self</span>.secondViewAttribute.item;</div><div class="line"><span class="built_in">NSLayoutAttribute</span> secondLayoutAttribute = <span class="keyword">self</span>.secondViewAttribute.layoutAttribute;</div></pre></td></tr></table></figure>
<p>è¿™è¾¹æ˜¯è·å–å³å°†ç”¨äºåˆå§‹åŒ– <code>NSLayoutConstraint</code> çš„å­ç±» <code>MASLayoutConstraint</code> çš„å‡ ä¸ªå±æ€§ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (!<span class="keyword">self</span>.firstViewAttribute.isSizeAttribute &amp;&amp; !<span class="keyword">self</span>.secondViewAttribute) &#123;</div><div class="line">     secondLayoutItem = <span class="keyword">self</span>.firstViewAttribute.view.superview;</div><div class="line">     secondLayoutAttribute = firstLayoutAttribute;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™è¾¹æ˜¯åˆ¤æ–­å½“å‰å³å°†æ·»åŠ çš„çº¦æŸæ˜¯å¦æ˜¯ <code>size</code> ç±»å‹çš„å¹¶ä¸” <code>self.secondViewAttribute</code> ä¹Ÿå°±æ˜¯çº¦æŸçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ <code>nil</code>ï¼Œï¼ˆ<code>eg make.left.equalTo(@10)</code>ï¼‰ä¼šè‡ªåŠ¨å°†çº¦æŸæ·»åŠ åˆ°çº¦æŸçš„ç¬¬ä¸€ä¸ªå‚æ•°è§†å›¾çš„ <code>superview</code> ä¸Šã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">MASLayoutConstraint *layoutConstraint = [MASLayoutConstraint</div><div class="line">                                 constraintWithItem:firstLayoutItem</div><div class="line">                                        attribute:firstLayoutAttribute</div><div class="line">                                        relatedBy:<span class="keyword">self</span>.layoutRelation</div><div class="line">                                           toItem:secondLayoutItem</div><div class="line">                                        attribute:secondLayoutAttribute</div><div class="line">                                       multiplier:<span class="keyword">self</span>.layoutMultiplier</div><div class="line">                                         constant:<span class="keyword">self</span>.layoutConstant];</div><div class="line">    </div><div class="line">layoutConstraint.priority = <span class="keyword">self</span>.layoutPriority;</div><div class="line">layoutConstraint.mas_key = <span class="keyword">self</span>.mas_key;</div></pre></td></tr></table></figure>
<p>ç„¶åå°±ä¼šåˆå§‹åŒ– <code>NSLayoutConstraint</code> çš„å­ç±» <code>MASLayoutConstraint</code>ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="keyword">self</span>.secondViewAttribute.view) &#123;</div><div class="line">    MAS_VIEW *closestCommonSuperview = [<span class="keyword">self</span>.firstViewAttribute.view mas_closestCommonSuperview:<span class="keyword">self</span>.secondViewAttribute.view];</div><div class="line">    <span class="built_in">NSAssert</span>(closestCommonSuperview,</div><div class="line">                 <span class="string">@"couldn't find a common superview for %@ and %@"</span>,</div><div class="line">                 <span class="keyword">self</span>.firstViewAttribute.view, <span class="keyword">self</span>.secondViewAttribute.view);</div><div class="line">    <span class="keyword">self</span>.installedView = closestCommonSuperview;</div><div class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">self</span>.firstViewAttribute.isSizeAttribute) &#123;</div><div class="line">    <span class="keyword">self</span>.installedView = <span class="keyword">self</span>.firstViewAttribute.view;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">self</span>.installedView = <span class="keyword">self</span>.firstViewAttribute.view.superview;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç ä¼šå…ˆåˆ¤æ–­æ˜¯å¦æœ‰çº¦æŸç¬¬äºŒä¸ªå‚æ•°çš„è§†å›¾ï¼Œæœ‰çš„è¯ä¼šå¯»æ‰¾çº¦æŸç¬¬ä¸€ä¸ªå’Œç¬¬äºŒå‚æ•°è§†å›¾çš„å…¬å…± <code>Superview</code>ï¼Œç›¸å½“äºæ±‚ä¸¤ä¸ªæ•°çš„æœ€å°å…¬å€æ•°ï¼›å¦‚æœä¸æ»¡è¶³ç¬¬ä¸€ä¸ªæ¡ä»¶ï¼Œä¼šåˆ¤æ–­çº¦æŸç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¦æ˜¯ <code>size</code> ç±»å‹çš„ï¼Œæ˜¯çš„è¯ç›´æ¥å–åˆ°å®ƒçš„è§†å›¾ï¼›æœ€åéƒ½ä¸æ»¡è¶³ä¼šç›´æ¥å–åˆ°çº¦æŸç¬¬ä¸€ä¸ªå‚æ•°è§†å›¾çˆ¶è§†å›¾ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">MASLayoutConstraint *existingConstraint = <span class="literal">nil</span>;</div><div class="line"><span class="keyword">if</span> (<span class="keyword">self</span>.updateExisting) &#123;</div><div class="line">    existingConstraint = [<span class="keyword">self</span> layoutConstraintSimilarTo:layoutConstraint];</div><div class="line">&#125;</div><div class="line"><span class="keyword">if</span> (existingConstraint) &#123;</div><div class="line">   <span class="comment">// just update the constant</span></div><div class="line">    existingConstraint.constant = layoutConstraint.constant;</div><div class="line">    <span class="keyword">self</span>.layoutConstraint = existingConstraint;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    [<span class="keyword">self</span>.installedView addConstraint:layoutConstraint];</div><div class="line">    <span class="keyword">self</span>.layoutConstraint = layoutConstraint;</div><div class="line">    [firstLayoutItem.mas_installedConstraints addObject:<span class="keyword">self</span>];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœéœ€è¦å‡çº§å½“å‰çš„çº¦æŸå°±ä¼šè·å–åŸæœ‰çš„çº¦æŸï¼Œå¹¶æ›¿æ¢ä¸ºæ–°çš„çº¦æŸï¼Œè¿™æ ·å°±ä¸éœ€è¦å†æ¬¡ä¸º <code>view</code> å®‰è£…çº¦æŸã€‚å¦‚æœåŸæ¥çš„ <code>view</code> ä¸­ä¸å­˜åœ¨å¯ä»¥å‡çº§çš„çº¦æŸï¼Œé‚£ä¹ˆå°±ä¼šåœ¨ä¸Šä¸€æ­¥å¯»æ‰¾åˆ°çš„ <code>installedView</code> ä¸Šé¢æ·»åŠ çº¦æŸã€‚</p>
<h4 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h4><p>é˜…è¯»æ‡‚æºç çœŸæ˜¯ä¸€ä»¶å¾ˆçˆ½çš„äº‹æƒ…ï¼Œå¦‚æœæœ‰ä»€ä¹ˆç†è§£çš„ä¸åˆ°ä½çš„åœ°æ–¹å¤§å®¶å¤šå¤šæŒ‡æ­£ã€‚ä¹Ÿå¸Œæœ›å¤§å®¶èƒ½å¤Ÿè€å¿ƒçš„çœ‹ä¸‹å»ï¼Œä¸€å®šä¼šæœ‰æ‰€æ”¶è·çš„ã€‚</p>
<p>å‚è€ƒé“¾æ¥</p>
<p><a href="http://www.cnblogs.com/ludashi/p/5591572.html" target="_blank" rel="external">http://www.cnblogs.com/ludashi/p/5591572.html</a></p>
<p><a href="https://github.com/Draveness/iOS-Source-Code-Analyze/blob/master/contents/Masonry/iOS%20%E6%BA%90%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90%20---%20Masonry.md" target="_blank" rel="external">https://github.com/Draveness/iOS-Source-Code-Analyze/blob/master/contents/Masonry/iOS%20%E6%BA%90%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90%20â€”%20Masonry.md</a></p>


                
            </div>


            <!-- Comments -->
            
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    




                </div>
            
        </div>
    </div>
</article>

    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

                <ul class="list-inline text-center">
                    

                    

                    

                    

                    

                    

                    
                </ul>
                <p class="copyright text-muted">Get busy living, or get busy dying~ <br>Copyright &copy; Hexo-CleanBlog 2016-2018 <br></p>
            </div>
        </div>
    </div>
</footer>


    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>

<!-- Bootstrap -->
<script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

<!-- Gallery -->
<script src="//cdn.bootcss.com/featherlight/1.7.1/featherlight.gallery.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->



</body>

</html>
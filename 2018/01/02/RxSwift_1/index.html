<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="ç¯å¢ƒï¼š

Xcode 9.1Swift 4.0RxSwift 4.0">
<meta property="og:type" content="article">
<meta property="og:title" content="RxSwift å…¥å‘-éœ€è¦çŸ¥é“çš„åŸºç¡€æ¦‚å¿µ">
<meta property="og:url" content="http://yoursite.com/2018/01/02/RxSwift_1/index.html">
<meta property="og:site_name" content="ï¼ƒ TODOï¼š">
<meta property="og:description" content="ç¯å¢ƒï¼š

Xcode 9.1Swift 4.0RxSwift 4.0">
<meta property="og:updated_time" content="2018-02-13T09:38:52.023Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="RxSwift å…¥å‘-éœ€è¦çŸ¥é“çš„åŸºç¡€æ¦‚å¿µ">
<meta name="twitter:description" content="ç¯å¢ƒï¼š

Xcode 9.1Swift 4.0RxSwift 4.0">
    
    
        
          
              <link rel="shortcut icon" href="/images/red.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/red.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/red.png">
          
        
    
    <!-- title -->
    <title>RxSwift å…¥å‘-éœ€è¦çŸ¥é“çš„åŸºç¡€æ¦‚å¿µ</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Archives</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2018/01/08/objc_delay/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2017/12/07/swift-tips/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2018/01/02/RxSwift_1/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2018/01/02/RxSwift_1/&text=RxSwift å…¥å‘-éœ€è¦çŸ¥é“çš„åŸºç¡€æ¦‚å¿µ"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2018/01/02/RxSwift_1/&title=RxSwift å…¥å‘-éœ€è¦çŸ¥é“çš„åŸºç¡€æ¦‚å¿µ"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2018/01/02/RxSwift_1/&is_video=false&description=RxSwift å…¥å‘-éœ€è¦çŸ¥é“çš„åŸºç¡€æ¦‚å¿µ"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=RxSwift å…¥å‘-éœ€è¦çŸ¥é“çš„åŸºç¡€æ¦‚å¿µ&body=Check out this article: http://yoursite.com/2018/01/02/RxSwift_1/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2018/01/02/RxSwift_1/&title=RxSwift å…¥å‘-éœ€è¦çŸ¥é“çš„åŸºç¡€æ¦‚å¿µ"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2018/01/02/RxSwift_1/&title=RxSwift å…¥å‘-éœ€è¦çŸ¥é“çš„åŸºç¡€æ¦‚å¿µ"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2018/01/02/RxSwift_1/&title=RxSwift å…¥å‘-éœ€è¦çŸ¥é“çš„åŸºç¡€æ¦‚å¿µ"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2018/01/02/RxSwift_1/&title=RxSwift å…¥å‘-éœ€è¦çŸ¥é“çš„åŸºç¡€æ¦‚å¿µ"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2018/01/02/RxSwift_1/&name=RxSwift å…¥å‘-éœ€è¦çŸ¥é“çš„åŸºç¡€æ¦‚å¿µ&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1.0"><span class="toc-number">1.</span> <span class="toc-text"> ä»€ä¹ˆæ˜¯ RxSwift </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1.1"><span class="toc-number">2.</span> <span class="toc-text"> å“åº”å¼ç¼–ç¨‹ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1.2"><span class="toc-number">3.</span> <span class="toc-text"> RxSwift çš„æ ¸å¿ƒ </span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Observable-å¯è¢«è§‚å¯Ÿçš„åºåˆ—"><span class="toc-number">3.1.</span> <span class="toc-text">Observable - å¯è¢«è§‚å¯Ÿçš„åºåˆ—</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Observable-çš„ä¸‰ç§äº‹ä»¶"><span class="toc-number">3.1.1.</span> <span class="toc-text">Observable çš„ä¸‰ç§äº‹ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#åŸºæœ¬åˆ›å»ºæ–¹å¼"><span class="toc-number">3.1.2.</span> <span class="toc-text">åŸºæœ¬åˆ›å»ºæ–¹å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å°è£…å¥½æ“ä½œç¬¦åˆ›å»ºæ–¹å¼"><span class="toc-number">3.1.3.</span> <span class="toc-text">å°è£…å¥½æ“ä½œç¬¦åˆ›å»ºæ–¹å¼</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Observer-è§‚å¯Ÿè€…"><span class="toc-number">3.2.</span> <span class="toc-text">Observer - è§‚å¯Ÿè€…</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#åŸºæœ¬åˆ›å»ºæ–¹å¼-1"><span class="toc-number">3.2.1.</span> <span class="toc-text">åŸºæœ¬åˆ›å»ºæ–¹å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ä¸€äº›å°è£…"><span class="toc-number">3.2.2.</span> <span class="toc-text">ä¸€äº›å°è£…</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Subjects-æ—¢æ˜¯å¯è¢«ç›‘å¬çš„åºåˆ—ä¹Ÿæ˜¯è§‚å¯Ÿè€…"><span class="toc-number">3.3.</span> <span class="toc-text">Subjects - æ—¢æ˜¯å¯è¢«ç›‘å¬çš„åºåˆ—ä¹Ÿæ˜¯è§‚å¯Ÿè€…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Disposable-å¯è¢«æ¸…é™¤çš„èµ„æº"><span class="toc-number">3.4.</span> <span class="toc-text">Disposable - å¯è¢«æ¸…é™¤çš„èµ„æº</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Dispose"><span class="toc-number">3.4.1.</span> <span class="toc-text">Dispose</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DisposeBag"><span class="toc-number">3.4.2.</span> <span class="toc-text">DisposeBag</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#takeUntil"><span class="toc-number">3.4.3.</span> <span class="toc-text">takeUntil</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1.3"><span class="toc-number">4.</span> <span class="toc-text"> Hot and Cold Observables </span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Cold-Observables"><span class="toc-number">4.1.</span> <span class="toc-text">Cold Observables</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hot-Observables"><span class="toc-number">4.2.</span> <span class="toc-text">Hot Observables</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        RxSwift å…¥å‘-éœ€è¦çŸ¥é“çš„åŸºç¡€æ¦‚å¿µ
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">ï¼ƒ TODOï¼š</span>
      </span>
      
    <div class="postdate">
        <time datetime="2018-01-02T13:55:23.000Z" itemprop="datePublished">2018-01-02</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/RxSwift/">RxSwift</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>ç¯å¢ƒï¼š</p>
<blockquote>
<p>Xcode 9.1<br>Swift 4.0<br>RxSwift 4.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </p>
</blockquote>
<p>ç›®å½•ï¼š</p>
<blockquote>
<p><a href="#1.0">ä»€ä¹ˆæ˜¯ RxSwift</a><br><a href="#1.1">å“åº”å¼ç¼–ç¨‹</a><br><a href="#1.2">RxSwift æ ¸å¿ƒæ¦‚å¿µ</a><br><a href="#1.3">Hot and Cold Observables</a></p>
</blockquote>
<h2 id="1.0"> ä»€ä¹ˆæ˜¯ RxSwift </h2>

<p><a href="https://github.com/ReactiveX/RxSwift" target="_blank" rel="external">RxSwift</a> æ˜¯ <a href="http://reactivex.io/" target="_blank" rel="external">ReactiveX</a> çš„ Swift ç‰ˆæœ¬ï¼Œå…¨ç§° Reactive Extensions Swiftï¼Œæ˜¯ä¸€ä¸ªå“åº”å¼ç¼–ç¨‹çš„åŸºç¡€æ¡†æ¶ã€‚</p>
<h2 id="1.1"> å“åº”å¼ç¼–ç¨‹ </h2>

<p>åœ¨é¢å‘å¯¹è±¡æ—¶ä»£ï¼Œå¤§å¤šæ•°ç¨‹åºéƒ½åƒè¿™æ ·è¿è¡Œï¼šä½ çš„ä»£ç å‘Šè¯‰ä½ çš„ç¨‹åºéœ€è¦åšä»€ä¹ˆï¼Œå¹¶ä¸”æœ‰å¾ˆå¤šæ–¹æ³•æ¥ç›‘å¬å˜åŒ–â€“ä½†åŒæ—¶ä½ åˆå¿…é¡»ä¸»åŠ¨å‘Šè¯‰ç³»ç»Ÿä»€ä¹ˆæ—¶å€™å‘ç”Ÿçš„å˜åŒ–ã€‚</p>
<p>å“åº”å¼ç¼–ç¨‹çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šä½ çš„ç¨‹åºå¯ä»¥å¯¹åº•å±‚æ•°æ®çš„å˜åŒ–åšå‡ºå“åº”ï¼Œè€Œä¸éœ€è¦ä½ ç›´æ¥å‘Šè¯‰å®ƒã€‚è¿™æ ·ï¼Œä½ å¯ä»¥æ›´ä¸“æ³¨äºæ‰€éœ€è¦å¤„ç†çš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸éœ€è¦å»ç»´æŠ¤ç‰¹å®šçš„çŠ¶æ€ã€‚</p>
<p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<blockquote>
<p>a ï¼ b ï¼‹ c<br>èµ‹å€¼ä¹‹å b æˆ–è€… c çš„å€¼å˜åŒ–åï¼Œa çš„å€¼ä¸ä¼šè·Ÿç€å˜åŒ–<br>å“åº”å¼ç¼–ç¨‹ï¼Œç›®æ ‡å°±æ˜¯ï¼Œå¦‚æœ b æˆ–è€… c çš„æ•°å€¼å‘ç”Ÿå˜åŒ–ï¼Œa çš„æ•°å€¼ä¼šåŒæ—¶å‘ç”Ÿå˜åŒ–ï¼›</p>
</blockquote>
<p>å¦å¤–æ¨èçœ‹çœ‹è¿™ç¯‡ <a href="http://blog.mrriddler.com/" target="_blank" rel="external">iOS å“åº”å¼æ¶æ„</a></p>
<h2 id="1.2"> RxSwift çš„æ ¸å¿ƒ </h2>

<p>RxSwift æ ¸å¿ƒæ¦‚å¿µå°±æ˜¯ä¸€ä¸ªè§‚å¯Ÿè€…ï¼ˆObserverï¼‰è®¢é˜…ä¸€ä¸ªå¯è¢«è§‚å¯Ÿåºåˆ—ï¼ˆObservableï¼‰ã€‚è§‚å¯Ÿè€…å¯¹å¯è¢«è§‚å¯Ÿåºåˆ—å‘å°„çš„æ•°æ®æˆ–æ•°æ®åºåˆ—ä½œå‡ºå“åº”ã€‚</p>
<p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œå½“åˆ«äººåœ¨è·Ÿä½ è¯´è¯æ—¶ï¼Œä½ å°±æ˜¯é‚£ä¸ªè§‚å¯Ÿè€…ï¼ˆObserverï¼‰ï¼Œåˆ«äººå°±æ˜¯é‚£ä¸ªï¼ˆObservableï¼‰ï¼Œå®ƒæœ‰å‡ ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>å¯èƒ½ä¼šä¸æ–­åœ°è·Ÿä½ è¯´è¯ã€‚ï¼ˆ<code>onNext</code>ï¼‰</li>
<li>å¯èƒ½ä¼šè¯´é”™è¯ã€‚ï¼ˆ<code>onError</code>ï¼‰</li>
<li>ç»“æŸè¯´è¯ã€‚ï¼ˆ<code>onCompleted</code>ï¼‰</li>
</ul>
<p>ä½ åœ¨å¬åˆ°å¯¹æ–¹è¯´çš„è¯åï¼Œä¹Ÿå¯ä»¥æœ‰å‡ ç§ååº”ï¼š</p>
<ul>
<li>æ ¹æ®è¯´çš„è¯ï¼Œåšç›¸åº”çš„äº‹ï¼Œæ¯”å¦‚å¯¹æ–¹è®©ä½ å€Ÿé’±ç»™ä»–ã€‚ï¼ˆ<code>subscribe</code>ï¼‰</li>
<li>æŠŠå¯¹æ–¹è¯´çš„è¯ï¼ŒåŠ å·¥ä¸‹å†ä¼ è¾¾ç»™å…¶ä»–äººï¼Œæ¯”å¦‚å¯¹æ–¹è¯´å°æå¥½åƒä¸å¤ªèˆ’æœï¼Œä½ ä¼ è¾¾ç»™å…¶ä»–äººæ—¶å°±å˜æˆäº†å°æå¤±æ‹äº†ã€‚ï¼ˆ<code>map:</code>ï¼‰</li>
<li>å‚è€ƒå…¶ä»–äººè¯´çš„è¯å†åšå¤„ç†ï¼Œæ¯”å¦‚å°æè¯´æŸå®¶åº—å¾ˆå¥½åƒï¼Œå°é»„è¯´æŸå®¶åº—ä¸€èˆ¬èˆ¬ï¼Œä½ éœ€è¦ç»“åˆä¸¤ä¸ªäººçš„æ„è§å†åšå®šå¤ºã€‚ï¼ˆ<code>zip:</code>ï¼‰</li>
</ul>
<h3 id="Observable-å¯è¢«è§‚å¯Ÿçš„åºåˆ—"><a href="#Observable-å¯è¢«è§‚å¯Ÿçš„åºåˆ—" class="headerlink" title="Observable - å¯è¢«è§‚å¯Ÿçš„åºåˆ—"></a>Observable - å¯è¢«è§‚å¯Ÿçš„åºåˆ—</h3><h4 id="Observable-çš„ä¸‰ç§äº‹ä»¶"><a href="#Observable-çš„ä¸‰ç§äº‹ä»¶" class="headerlink" title="Observable çš„ä¸‰ç§äº‹ä»¶"></a>Observable çš„ä¸‰ç§äº‹ä»¶</h4><ul>
<li>next - åºåˆ—äº§ç”Ÿäº†ä¸€ä¸ªæ–°çš„å…ƒç´ </li>
<li>error - åˆ›å»ºåºåˆ—æ—¶äº§ç”Ÿäº†ä¸€ä¸ªé”™è¯¯ï¼Œå¯¼è‡´åºåˆ—ç»ˆæ­¢</li>
<li>completed - åºåˆ—çš„æ‰€æœ‰å…ƒç´ éƒ½å·²ç»æˆåŠŸäº§ç”Ÿï¼Œæ•´ä¸ªåºåˆ—å·²ç»å®Œæˆ</li>
</ul>
<h4 id="åŸºæœ¬åˆ›å»ºæ–¹å¼"><a href="#åŸºæœ¬åˆ›å»ºæ–¹å¼" class="headerlink" title="åŸºæœ¬åˆ›å»ºæ–¹å¼"></a>åŸºæœ¬åˆ›å»ºæ–¹å¼</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">MyError</span>: <span class="title">Error</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> anError</div><div class="line">&#125;</div><div class="line">        </div><div class="line"><span class="keyword">let</span> message: <span class="type">Observable</span>&lt;<span class="type">String</span>&gt; = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">            </div><div class="line">    observer.onNext(<span class="string">"ğŸ˜„"</span>)</div><div class="line">    observer.onError(<span class="type">MyError</span>.anError)</div><div class="line">    observer.onCompleted()</div><div class="line">        </div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="å°è£…å¥½æ“ä½œç¬¦åˆ›å»ºæ–¹å¼"><a href="#å°è£…å¥½æ“ä½œç¬¦åˆ›å»ºæ–¹å¼" class="headerlink" title="å°è£…å¥½æ“ä½œç¬¦åˆ›å»ºæ–¹å¼"></a>å°è£…å¥½æ“ä½œç¬¦åˆ›å»ºæ–¹å¼</h4><ul>
<li>just - å°†æŸä¸€ä¸ªå…ƒç´ è½¬æ¢ä¸º <code>Observable</code> å¹¶å‘å‡ºå”¯ä¸€çš„ä¸€ä¸ªå…ƒç´ </li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> id = <span class="type">Observable</span>.just(<span class="number">0</span>)</div><div class="line"></div><div class="line">ç›¸å½“äºï¼š</div><div class="line"></div><div class="line"><span class="keyword">let</span> id = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; observer <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="number">0</span>)</div><div class="line">    observer.onCompleted()</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>from - å°†å…¶ä»–ç±»å‹æˆ–è€…æ•°æ®ç»“æ„è½¬æ¢ä¸º <code>Observable</code> </li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">å°†ä¸€ä¸ªæ•°ç»„è½¬æ¢ä¸º <span class="type">Observable</span>ï¼š</div><div class="line"></div><div class="line"><span class="keyword">let</span> numbers = <span class="type">Observable</span>.from([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>])</div><div class="line"></div><div class="line">ç›¸å½“äºï¼š</div><div class="line"></div><div class="line"><span class="keyword">let</span> numbers = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; observer <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="number">0</span>)</div><div class="line">    observer.onNext(<span class="number">1</span>)</div><div class="line">    observer.onNext(<span class="number">2</span>)</div><div class="line">    observer.onCompleted()</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å…·ä½“æ›´å¤šçš„æ“ä½œç¬¦ï¼Œå¤§å®¶å¯ä»¥çœ‹çœ‹è¿™ä¸ªæ–‡æ¡£çš„ <a href="https://beeth0ven.github.io/RxSwift-Chinese-Documentation/content/decision_tree.html" target="_blank" rel="external">å¦‚ä½•é€‰æ‹©æ“ä½œç¬¦ï¼Ÿ</a>ã€‚ä¹Ÿå¯ä»¥çœ‹çœ‹å®˜æ–¹ç¤ºä¾‹é‡Œçš„ <code>playground</code> ï¼š<a href="https://github.com/ReactiveX/RxSwift/tree/master/Rx.playground" target="_blank" rel="external">Rx.playground</a></p>
<h3 id="Observer-è§‚å¯Ÿè€…"><a href="#Observer-è§‚å¯Ÿè€…" class="headerlink" title="Observer - è§‚å¯Ÿè€…"></a>Observer - è§‚å¯Ÿè€…</h3><h4 id="åŸºæœ¬åˆ›å»ºæ–¹å¼-1"><a href="#åŸºæœ¬åˆ›å»ºæ–¹å¼-1" class="headerlink" title="åŸºæœ¬åˆ›å»ºæ–¹å¼"></a>åŸºæœ¬åˆ›å»ºæ–¹å¼</h4><p>ç†è§£è§‚å¯Ÿè€…çš„æ„æ€åï¼Œé‚£æˆ‘ä»¬å¦‚ä½•åˆ›å»ºå‘¢ï¼Ÿå¯¹åº” Observable ä¸€èŠ‚ä¸­çš„ â€œåŸºæœ¬åˆ›å»ºæ–¹å¼â€ï¼Œæˆ‘ä»¬å¯ä»¥ä¸º <code>message: Observable&lt;String&gt;</code> åˆ›å»ºä¸€ä¸ªè§‚å¯Ÿè€…ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">message.subscribe(onNext: &#123; str <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(<span class="string">"è§‚å¯Ÿä¿¡æ¯"</span>)</div><div class="line">    &#125;, onError: &#123; error <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(<span class="string">"å‘ç”Ÿé”™è¯¯"</span>)</div><div class="line">    &#125;, onCompleted: &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"å®Œæˆ"</span>)</div><div class="line">&#125;).dispose()</div></pre></td></tr></table></figure>
<p>åˆ›å»ºè§‚å¯Ÿè€…æœ€ç›´æ¥çš„æ–¹æ³•å°±æ˜¯åœ¨ <code>Observable</code> çš„ <code>subscribe</code> æ–¹æ³•åé¢æè¿°ï¼Œäº‹ä»¶å‘ç”Ÿæ—¶ï¼Œéœ€è¦å¦‚ä½•åšå‡ºå“åº”ã€‚è€Œè§‚å¯Ÿè€…å°±æ˜¯ç”±åé¢çš„ <code>onNext</code>ï¼Œ<code>onError</code>ï¼Œ<code>onCompleted</code> çš„è¿™äº›é—­åŒ…æ„å»ºå‡ºæ¥çš„ã€‚</p>
<h4 id="ä¸€äº›å°è£…"><a href="#ä¸€äº›å°è£…" class="headerlink" title="ä¸€äº›å°è£…"></a>ä¸€äº›å°è£…</h4><p>RxSwift ä¹Ÿå¸®æˆ‘ä»¬å°è£…äº†å¾ˆå¤šè®¸å¤šå¸¸ç”¨çš„è§‚å¯Ÿè€…ï¼ˆObserverï¼‰ï¼Œæ¯”å¦‚ <code>button</code> çš„ç‚¹å‡»ï¼Œé€šçŸ¥ä»¥åŠä»£ç†ç­‰ç­‰ã€‚</p>
<p>æˆ‘ä»¬å…ˆå¯¼å…¥å¤´æ–‡ä»¶ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> RxCocoa</div></pre></td></tr></table></figure>
<p>åŸå…ˆç›‘å¬æŒ‰é’®ç‚¹å‡»éœ€è¦è¿™ä¹ˆåšï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">    </div><div class="line">        <span class="keyword">let</span> btn = <span class="type">UIButton</span>.<span class="keyword">init</span>(frame: <span class="type">CGRect</span>(x: <span class="number">100</span>, y: <span class="number">100</span>, width: <span class="number">150</span>, height: <span class="number">50</span>))</div><div class="line">        btn.backgroundColor = <span class="type">UIColor</span>.brown</div><div class="line">        btn.addTarget(<span class="keyword">self</span>, action: #selector(btnClick), <span class="keyword">for</span>: .touchUpInside)</div><div class="line">        view.addSubview(btn)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">// å›è°ƒç›‘å¬</span></div><div class="line">    <span class="meta">@objc</span> <span class="function"><span class="keyword">func</span> <span class="title">btnClick</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"btn click !"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç”¨ RxSwift æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåšï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">        </div><div class="line">        <span class="keyword">let</span> btn = <span class="type">UIButton</span>.<span class="keyword">init</span>(frame: <span class="type">CGRect</span>(x: <span class="number">100</span>, y: <span class="number">100</span>, width: <span class="number">150</span>, height: <span class="number">50</span>))</div><div class="line">        btn.backgroundColor = <span class="type">UIColor</span>.brown</div><div class="line">        view.addSubview(btn)</div><div class="line">        </div><div class="line">        <span class="comment">// å›è°ƒç›‘å¬</span></div><div class="line">        btn.rx.tap.subscribe(onNext: &#123;</div><div class="line">    </div><div class="line">            <span class="built_in">print</span>(<span class="string">"btn click !"</span>)</div><div class="line">            </div><div class="line">        &#125;).disposed(by: disposeBag)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å†çœ‹çœ‹ä»£ç†ï¼ŒåŸå…ˆæˆ‘ä»¬éœ€è¦è¿™ä¹ˆåšï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> textView: <span class="type">UITextView</span>!</div><div class="line"></div><div class="line">    <span class="keyword">var</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">        <span class="comment">// è®¾ç½®ä»£ç†</span></div><div class="line">        textView.delegate = <span class="keyword">self</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIViewController</span>: <span class="title">UITextViewDelegate</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">scrollViewDidScroll</span><span class="params">(<span class="number">_</span> scrollView: UIScrollView)</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"yåæ ‡ï¼š\(offset.y)"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç”¨ RxSwift æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåšï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> textView: <span class="type">UITextView</span>!</div><div class="line"></div><div class="line">    <span class="keyword">var</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">        </div><div class="line">        textView.rx.contentOffset.subscribe(onNext: &#123; offset <span class="keyword">in</span></div><div class="line">            </div><div class="line">            <span class="built_in">print</span>(<span class="string">"yåæ ‡ï¼š\(offset.y)"</span>)</div><div class="line">            </div><div class="line">        &#125;).disposed(by: disposeBag)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¯ä»¥å‘ç°ï¼ŒRxSwift ä½¿ä¸€äº›ç³»ç»Ÿçš„æ–¹æ³•ï¼Œä½¿ç”¨ä¸Šå˜å¾—æ›´åŠ æ–¹ä¾¿ã€‚</p>
<h3 id="Subjects-æ—¢æ˜¯å¯è¢«ç›‘å¬çš„åºåˆ—ä¹Ÿæ˜¯è§‚å¯Ÿè€…"><a href="#Subjects-æ—¢æ˜¯å¯è¢«ç›‘å¬çš„åºåˆ—ä¹Ÿæ˜¯è§‚å¯Ÿè€…" class="headerlink" title="Subjects - æ—¢æ˜¯å¯è¢«ç›‘å¬çš„åºåˆ—ä¹Ÿæ˜¯è§‚å¯Ÿè€…"></a>Subjects - æ—¢æ˜¯å¯è¢«ç›‘å¬çš„åºåˆ—ä¹Ÿæ˜¯è§‚å¯Ÿè€…</h3><p>Subject æ˜¯ observable å’Œ Observer ä¹‹é—´çš„æ¡¥æ¢ã€‚ä¸€ä¸ª Subject æ—¢æ˜¯ä¸€ä¸ª Obserable ä¹Ÿæ˜¯ä¸€ä¸ª Observerï¼Œæ—¢å¯ä»¥å‘å‡ºäº‹ä»¶ï¼Œä¹Ÿå¯ä»¥ç›‘å¬äº‹ä»¶ã€‚</p>
<p>ä¾‹å¦‚ï¼š<code>UITextField</code> çš„å½“å‰æ–‡æœ¬ã€‚å®ƒå¯ä»¥çœ‹æˆæ˜¯ç”±ç”¨æˆ·è¾“å…¥ï¼Œè€Œäº§ç”Ÿçš„ä¸€ä¸ªæ–‡æœ¬åºåˆ—ã€‚ä¹Ÿå¯ä»¥æ˜¯ç”±å¤–éƒ¨æ–‡æœ¬åºåˆ—ï¼Œæ¥æ§åˆ¶å½“å‰æ˜¾ç¤ºå†…å®¹çš„è§‚å¯Ÿè€…ï¼š</p>
<ul>
<li>ä½œä¸ºå¯è¢«ç›‘å¬çš„åºåˆ—ï¼ˆ<code>observable</code>ï¼‰</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> tf: <span class="type">UITextField</span>!</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">        </div><div class="line">        <span class="comment">// ä½œä¸ºå¯è¢«ç›‘å¬çš„åºåˆ—</span></div><div class="line">        <span class="keyword">let</span> observable_tf = tf.rx.text</div><div class="line">    </div><div class="line">        observable_tf.subscribe(onNext:&#123; text <span class="keyword">in</span></div><div class="line">            <span class="keyword">if</span> <span class="keyword">let</span> t = text &#123;</div><div class="line">                <span class="type">DebugPrint</span>(t)</div><div class="line">            &#125;</div><div class="line">        &#125;).disposed(by: disposeBag)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>ä½œä¸ºè§‚å¯Ÿè€…ï¼ˆ<code>Observer</code>ï¼‰</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> tf: <span class="type">UITextField</span>!</div><div class="line">    </div><div class="line">    <span class="keyword">var</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">                </div><div class="line">        <span class="comment">// ä½œä¸ºè§‚å¯Ÿè€…</span></div><div class="line">        <span class="keyword">let</span> observer_tf = tf.rx.text</div><div class="line">        <span class="keyword">let</span> text: <span class="type">Observable</span>&lt;<span class="type">String</span>?&gt; = <span class="type">Observable</span>.just(<span class="string">"Atom."</span>)</div><div class="line">        </div><div class="line">        text.bind(to: observer_tf).disposed(by: disposeBag)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>RxSwift ä¸­ä¹Ÿå®šä¹‰äº†ä¸€äº›è¾…åŠ©ç±»å‹ï¼Œå®ƒä»¬æ—¢æ˜¯å¯è¢«ç›‘å¬çš„åºåˆ—ä¹Ÿæ˜¯è§‚å¯Ÿè€…ã€‚è¿™é‡Œå°±ä¸å¤šè®²äº†ï¼Œå…·ä½“å¯ä»¥çœ‹çœ‹è¿™é‡Œ <a href="https://beeth0ven.github.io/RxSwift-Chinese-Documentation/content/rxswift_core/observable_and_observer.html" target="_blank" rel="external">Observable &amp; Observer æ—¢æ˜¯å¯è¢«ç›‘å¬çš„åºåˆ—ä¹Ÿæ˜¯è§‚å¯Ÿè€…</a>ã€‚</p>
<h3 id="Disposable-å¯è¢«æ¸…é™¤çš„èµ„æº"><a href="#Disposable-å¯è¢«æ¸…é™¤çš„èµ„æº" class="headerlink" title="Disposable - å¯è¢«æ¸…é™¤çš„èµ„æº"></a>Disposable - å¯è¢«æ¸…é™¤çš„èµ„æº</h3><p>å½“ç›‘å¬ä¸€ä¸ªäº‹ä»¶åºåˆ—çš„æ—¶å€™ï¼Œæœ‰æ¶ˆæ¯äº‹ä»¶æ¥äº†ï¼Œæˆ‘ä»¬åšæŸäº›äº‹æƒ…ã€‚ä½†æ˜¯è¿™ä¸ªäº‹ä»¶åºåˆ—ä¸å†å‘å‡ºæ¶ˆæ¯äº†ï¼Œæˆ‘ä»¬çš„ç›‘å¬ä¹Ÿå°±æ²¡æœ‰ä»€ä¹ˆå­˜åœ¨ä»·å€¼äº†ï¼Œä¸ºäº†ä¸æ¶ˆè€—å†…å­˜ï¼Œéœ€è¦é‡Šæ”¾è¿™äº›ç›‘å¬èµ„æºã€‚</p>
<p>ä¸€ä¸ª Observable è¢«è§‚å¯Ÿè®¢é˜…åï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ª <code>Disposable</code> å®ä¾‹ï¼Œè¡¨ç¤ºã€Œå¯æ‰”æ‰ã€çš„ï¼Œæ€ä¹ˆæ‰”æ‰å‘¢ï¼Ÿæœ‰ä¸‹é¢å‡ ç§æ–¹å¼ï¼š</p>
<ul>
<li>è°ƒç”¨ <code>dispose()</code> æ˜¾å¼é‡Šæ”¾</li>
<li>é€šè¿‡ DisposeBag ä¹Ÿå°±æ˜¯ <code>disposed()</code> éšå¼é‡Šæ”¾ã€‚</li>
<li>åˆ©ç”¨ <code>takeUntil</code> æ“ä½œç¬¦ï¼Œéšå¼é‡Šæ”¾ã€‚</li>
</ul>
<h4 id="Dispose"><a href="#Dispose" class="headerlink" title="Dispose"></a>Dispose</h4><p>æˆ‘ä»¬ç›´æ¥çœ‹ä¸ª ğŸŒ° ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line">    </div><div class="line">        <span class="keyword">let</span> subscription = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.interval(<span class="number">1.0</span>, scheduler: <span class="type">SerialDispatchQueueScheduler</span>.<span class="keyword">init</span>(internalSerialQueueName: <span class="string">"serial"</span>))</div><div class="line">            .subscribe &#123; event <span class="keyword">in</span></div><div class="line">                <span class="built_in">print</span>(<span class="string">"\(event)"</span>)</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">4.0</span>)</div><div class="line">        </div><div class="line">        <span class="type">DebugPrint</span>(<span class="string">"æ‰‹åŠ¨é‡Šæ”¾"</span>)</div><div class="line">        subscription.dispose()</div><div class="line">    </div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// è¾“å‡ºï¼š</span></div><div class="line">[<span class="number">2017</span>-<span class="number">12</span>-<span class="number">29</span> <span class="number">16</span>:<span class="number">47</span>:<span class="number">49</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">39</span>]ï¼šnext(<span class="number">0</span>)</div><div class="line">[<span class="number">2017</span>-<span class="number">12</span>-<span class="number">29</span> <span class="number">16</span>:<span class="number">47</span>:<span class="number">50</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">39</span>]ï¼šnext(<span class="number">1</span>)</div><div class="line">[<span class="number">2017</span>-<span class="number">12</span>-<span class="number">29</span> <span class="number">16</span>:<span class="number">47</span>:<span class="number">51</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">39</span>]ï¼šnext(<span class="number">2</span>)</div><div class="line">[<span class="number">2017</span>-<span class="number">12</span>-<span class="number">29</span> <span class="number">16</span>:<span class="number">47</span>:<span class="number">52</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">39</span>]ï¼šnext(<span class="number">3</span>)</div><div class="line">[<span class="number">2017</span>-<span class="number">12</span>-<span class="number">29</span> <span class="number">16</span>:<span class="number">47</span>:<span class="number">52</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">44</span>]ï¼šæ‰‹åŠ¨é‡Šæ”¾</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä¾‹å­ç±»ä¼¼å®šæ—¶å™¨ï¼Œæ¯ç§’ä¼šè°ƒä¸€æ¬¡å›è°ƒã€‚æˆ‘ä»¬ <code>sleep</code> 4 ç§’åï¼Œè°ƒä¸‹ <code>dispose()</code>ï¼Œå¯ä»¥å‘ç°å›è°ƒå°±åœæ­¢äº†ï¼Œå› ä¸ºè¿™ä¸ªè®¢é˜…è¢«é‡Šæ”¾äº†ã€‚</p>
<blockquote>
<p><code>dispose()</code> è¿™ç§æ˜¾ç¤ºé‡Šæ”¾èµ„æºçš„æ–¹å¼ä¸€èˆ¬ä¸æ¨èï¼Œä¸‹é¢ä»‹ç»çš„ DisposeBag æ˜¯æ¯”è¾ƒæ¨èçš„æ–¹å¼ï¼</p>
</blockquote>
<h4 id="DisposeBag"><a href="#DisposeBag" class="headerlink" title="DisposeBag"></a>DisposeBag</h4><p>DisposeBag æ˜¯æ¯”è¾ƒæ¨èçš„æ–¹å¼ã€‚çœ‹åå­—ä¹Ÿå¾ˆå¥½ç†è§£ -ã€Œå¤„ç†è¢‹ã€ï¼ŒæŠŠéœ€è¦é‡Šæ”¾çš„ <code>Disposable</code> å®ä¾‹ï¼Œæ‰”åˆ°è¢‹å­é‡Œã€‚åœ¨è¢‹å­è¢«å›æ”¶ï¼ˆ<code>deinit</code>ï¼‰æ—¶ï¼Œä¼šé¡ºä¾¿æ‰§è¡Œä¸€ä¸‹ <code>Disposable.dispose()</code>ï¼Œä¹‹å‰åˆ›å»º <code>Disposable</code> æ—¶ç”³è¯·çš„èµ„æºå°±ä¼šè¢«ä¸€å¹¶é‡Šæ”¾æ‰ã€‚å¬èµ·æ¥æœ‰ç‚¹åƒ ARCã€‚ä¸è¿‡åœ¨åˆ›å»ºè¿™ä¸ªã€Œå¤„ç†è¢‹ã€æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯å®ƒä¸é‚£ä¹ˆå¿«è¢«é‡Šæ”¾æ‰ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½æ˜¯å£°æ˜æˆå®ä¾‹çš„æˆå‘˜å˜é‡ï¼Œå’Œå®ä¾‹ç»‘å®šèµ·æ¥ï¼Œå®ä¾‹é”€æ¯ï¼Œå®ƒä¹Ÿå°±é”€æ¯ã€‚æˆ‘ä»¬å…·ä½“æ¥çœ‹ä¸ª ğŸŒ°ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewControllerTwo</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">// åˆ›å»ºã€Œå¤„ç†è¢‹ï¼Œå£°æ˜æˆå®ä¾‹çš„æˆå‘˜å˜é‡</span></div><div class="line">    <span class="keyword">var</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    </div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line"></div><div class="line">        <span class="keyword">let</span> subscription = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.interval(<span class="number">1.0</span>, scheduler: <span class="type">SerialDispatchQueueScheduler</span>.<span class="keyword">init</span>(internalSerialQueueName: <span class="string">"haha"</span>))</div><div class="line">            .subscribe &#123; event <span class="keyword">in</span></div><div class="line">                <span class="type">DebugPrint</span>(<span class="string">"\(event)"</span>)</div><div class="line">        &#125;</div><div class="line">        subscription.disposed(by: disposeBag)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">deinit</span> &#123;</div><div class="line">        <span class="type">DebugPrint</span>(<span class="string">"é‡Šæ”¾äº†"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// è¾“å‡ºï¼š</span></div><div class="line">[<span class="number">2017</span>-<span class="number">12</span>-<span class="number">29</span> <span class="number">17</span>:<span class="number">57</span>:<span class="number">03</span> <span class="type">ViewControllerTwo</span>.swift viewDidLoad() <span class="number">23</span>]ï¼šnext(<span class="number">0</span>)</div><div class="line">[<span class="number">2017</span>-<span class="number">12</span>-<span class="number">29</span> <span class="number">17</span>:<span class="number">57</span>:<span class="number">04</span> <span class="type">ViewControllerTwo</span>.swift viewDidLoad() <span class="number">23</span>]ï¼šnext(<span class="number">1</span>)</div><div class="line">[<span class="number">2017</span>-<span class="number">12</span>-<span class="number">29</span> <span class="number">17</span>:<span class="number">57</span>:<span class="number">05</span> <span class="type">ViewControllerTwo</span>.swift viewDidLoad() <span class="number">23</span>]ï¼šnext(<span class="number">2</span>)</div><div class="line">[<span class="number">2017</span>-<span class="number">12</span>-<span class="number">29</span> <span class="number">17</span>:<span class="number">57</span>:<span class="number">06</span> <span class="type">ViewControllerTwo</span>.swift viewDidLoad() <span class="number">23</span>]ï¼šnext(<span class="number">3</span>)</div><div class="line">[<span class="number">2017</span>-<span class="number">12</span>-<span class="number">29</span> <span class="number">17</span>:<span class="number">57</span>:<span class="number">07</span> <span class="type">ViewControllerTwo</span>.swift viewDidLoad() <span class="number">23</span>]ï¼šnext(<span class="number">4</span>)</div><div class="line">[<span class="number">2017</span>-<span class="number">12</span>-<span class="number">29</span> <span class="number">17</span>:<span class="number">57</span>:<span class="number">08</span> <span class="type">ViewControllerTwo</span>.swift <span class="keyword">deinit</span> <span class="number">29</span>]ï¼šé‡Šæ”¾äº†</div></pre></td></tr></table></figure>
<p>å¯ä»¥å‘ç°ï¼Œåœ¨ <code>ViewControllerTwo</code> é‡Šæ”¾ï¼ˆ<code>deinit</code>ï¼‰åï¼Œå›è°ƒä¹Ÿåœæ­¢äº†ï¼</p>
<h4 id="takeUntil"><a href="#takeUntil" class="headerlink" title="takeUntil"></a>takeUntil</h4><p>æˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨ <code>takeUntil</code> æ“ä½œç¬¦ï¼ŒæŠŠè®¢é˜…ç»‘å®šåœ¨ <code>deallocated</code>ï¼Œæ¥å®ç°è‡ªåŠ¨æ¸…ç†ã€‚æˆ‘ä»¬ç›´æ¥çœ‹ ğŸŒ°ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewControllerTwo</span>: <span class="title">UIViewController</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line"></div><div class="line">        <span class="number">_</span> = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;</div><div class="line">            .interval(<span class="number">1.0</span>, scheduler: <span class="type">SerialDispatchQueueScheduler</span>.<span class="keyword">init</span>(internalSerialQueueName: <span class="string">"haha"</span>))</div><div class="line">            .takeUntil(<span class="keyword">self</span>.rx.deallocated) <span class="comment">// ç»‘å®š deallocated</span></div><div class="line">            .subscribe &#123; event <span class="keyword">in</span></div><div class="line">                <span class="type">DebugPrint</span>(<span class="string">"\(event)"</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">deinit</span> &#123;</div><div class="line">        <span class="type">DebugPrint</span>(<span class="string">"é‡Šæ”¾äº†"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// è¾“å‡ºï¼š</span></div><div class="line">[<span class="number">2017</span>-<span class="number">12</span>-<span class="number">29</span> <span class="number">18</span>:<span class="number">24</span>:<span class="number">29</span> <span class="type">ViewControllerTwo</span>.swift viewDidLoad() <span class="number">22</span>]ï¼šnext(<span class="number">0</span>)</div><div class="line">[<span class="number">2017</span>-<span class="number">12</span>-<span class="number">29</span> <span class="number">18</span>:<span class="number">24</span>:<span class="number">30</span> <span class="type">ViewControllerTwo</span>.swift viewDidLoad() <span class="number">22</span>]ï¼šnext(<span class="number">1</span>)</div><div class="line">[<span class="number">2017</span>-<span class="number">12</span>-<span class="number">29</span> <span class="number">18</span>:<span class="number">24</span>:<span class="number">31</span> <span class="type">ViewControllerTwo</span>.swift viewDidLoad() <span class="number">22</span>]ï¼šnext(<span class="number">2</span>)</div><div class="line">[<span class="number">2017</span>-<span class="number">12</span>-<span class="number">29</span> <span class="number">18</span>:<span class="number">24</span>:<span class="number">32</span> <span class="type">ViewControllerTwo</span>.swift viewDidLoad() <span class="number">22</span>]ï¼šnext(<span class="number">3</span>)</div><div class="line">[<span class="number">2017</span>-<span class="number">12</span>-<span class="number">29</span> <span class="number">18</span>:<span class="number">24</span>:<span class="number">33</span> <span class="type">ViewControllerTwo</span>.swift viewDidLoad() <span class="number">22</span>]ï¼šnext(<span class="number">4</span>)</div><div class="line">[<span class="number">2017</span>-<span class="number">12</span>-<span class="number">29</span> <span class="number">18</span>:<span class="number">24</span>:<span class="number">34</span> <span class="type">ViewControllerTwo</span>.swift viewDidLoad() <span class="number">22</span>]ï¼šnext(<span class="number">5</span>)</div><div class="line">[<span class="number">2017</span>-<span class="number">12</span>-<span class="number">29</span> <span class="number">18</span>:<span class="number">24</span>:<span class="number">35</span> <span class="type">ViewControllerTwo</span>.swift <span class="keyword">deinit</span> <span class="number">27</span>]ï¼šé‡Šæ”¾äº†</div><div class="line">[<span class="number">2017</span>-<span class="number">12</span>-<span class="number">29</span> <span class="number">18</span>:<span class="number">24</span>:<span class="number">35</span> <span class="type">ViewControllerTwo</span>.swift viewDidLoad() <span class="number">22</span>]ï¼šcompleted</div></pre></td></tr></table></figure>
<p>å¯ä»¥å‘ç°åœ¨ <code>ViewControllerTwo</code> é‡Šæ”¾ï¼ˆ<code>deinit</code>ï¼‰åï¼Œå›è°ƒä¹Ÿåœæ­¢äº†ï¼</p>
<h2 id="1.3"> Hot and Cold Observables </h2>

<h3 id="Cold-Observables"><a href="#Cold-Observables" class="headerlink" title="Cold Observables"></a>Cold Observables</h3><p>åªæœ‰åœ¨è¢«è®¢é˜…çš„æ—¶å€™æ‰ä¼šå‘å°„äº‹ä»¶ã€‚æ¯æ¬¡æœ‰æ–°çš„è®¢é˜…è€…éƒ½ä¼šæŠŠä¹‹å‰æ‰€æœ‰çš„äº‹ä»¶éƒ½é‡æ–°å‘å°„ä¸€éï¼Œæ¢å¥è¯è¯´ï¼Œæ¯ä¸ªè®¢é˜…è€…éƒ½ä¼šç‹¬ç«‹çš„æ”¶åˆ°è®¢é˜…è€…å‘å°„çš„æ•°æ®ã€‚</p>
<p>ä¸¾ä¸ª ğŸŒ° ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">let</span> intSequence = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line"></div><div class="line">        observer.onNext(<span class="number">1</span>)</div><div class="line">        observer.onNext(<span class="number">2</span>)</div><div class="line">        observer.onNext(<span class="number">3</span>)</div><div class="line">        </div><div class="line">        <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ <code>Observable</code> åœ¨æ²¡è®¢é˜…ä¹‹å‰ï¼Œ<code>create</code> æ˜¯ä¸ä¼šè¢«æ‰§è¡Œçš„ã€‚å½“æˆ‘ä»¬è®¢é˜…æ—¶æ‰ä¼šæ‰§è¡Œï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">intSequence.subscribe(onNext:&#123; value <span class="keyword">in</span></div><div class="line">            </div><div class="line">    <span class="type">DebugPrint</span>(<span class="string">"subscribe1 : \(value)"</span>);</div><div class="line">            </div><div class="line">&#125;).disposed(by: disposeBag)</div><div class="line"></div><div class="line"><span class="comment">// è¾“å‡ºï¼š</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">17</span>:<span class="number">05</span>:<span class="number">24</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">76</span>]ï¼šsubscribe1 : <span class="number">1</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">17</span>:<span class="number">05</span>:<span class="number">24</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">76</span>]ï¼šsubscribe1 : <span class="number">2</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">17</span>:<span class="number">05</span>:<span class="number">24</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">76</span>]ï¼šsubscribe1 : <span class="number">3</span></div></pre></td></tr></table></figure>
<p>å¦‚æœæˆ‘ä»¬æ¥ç€ä¸Šé¢çš„ä»£ç å†å¤šæ·»åŠ å‡ ä¸ªè®¢é˜…ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">2</span>...<span class="number">4</span> &#123;</div><div class="line">    <span class="comment">// ç¬¬ä¸‰ä¸ªè®¢é˜…å»¶è¿Ÿä¸¤ç§’</span></div><div class="line">    <span class="keyword">if</span> i == <span class="number">3</span> &#123;</div><div class="line">        <span class="type">DispatchQueue</span>.main.asyncAfter(deadline: <span class="type">DispatchTime</span>.now() + <span class="number">2</span>, execute: &#123;</div><div class="line">            intSequence.subscribe(onNext:&#123; value <span class="keyword">in</span></div><div class="line">                </div><div class="line">                <span class="type">DebugPrint</span>(<span class="string">"subscribe\(i) : \(value)"</span>)</div><div class="line">                </div><div class="line">            &#125;).disposed(by: <span class="keyword">self</span>.disposeBag)</div><div class="line">        &#125;)</div><div class="line">        <span class="keyword">continue</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    intSequence.subscribe(onNext:&#123; value <span class="keyword">in</span></div><div class="line">        </div><div class="line">        <span class="type">DebugPrint</span>(<span class="string">"subscribe\(i) : \(value)"</span>)</div><div class="line">        </div><div class="line">    &#125;).disposed(by: disposeBag)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// è¾“å‡ºï¼š</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">17</span>:<span class="number">05</span>:<span class="number">24</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">76</span>]ï¼šsubscribe1 : <span class="number">1</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">17</span>:<span class="number">05</span>:<span class="number">24</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">76</span>]ï¼šsubscribe1 : <span class="number">2</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">17</span>:<span class="number">05</span>:<span class="number">24</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">76</span>]ï¼šsubscribe1 : <span class="number">3</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">17</span>:<span class="number">05</span>:<span class="number">24</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">96</span>]ï¼šsubscribe2 : <span class="number">1</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">17</span>:<span class="number">05</span>:<span class="number">24</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">96</span>]ï¼šsubscribe2 : <span class="number">2</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">17</span>:<span class="number">05</span>:<span class="number">24</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">96</span>]ï¼šsubscribe2 : <span class="number">3</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">17</span>:<span class="number">05</span>:<span class="number">24</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">96</span>]ï¼šsubscribe4 : <span class="number">1</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">17</span>:<span class="number">05</span>:<span class="number">24</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">96</span>]ï¼šsubscribe4 : <span class="number">2</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">17</span>:<span class="number">05</span>:<span class="number">24</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">96</span>]ï¼šsubscribe4 : <span class="number">3</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">17</span>:<span class="number">05</span>:<span class="number">26</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">86</span>]ï¼šsubscribe3 : <span class="number">1</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">17</span>:<span class="number">05</span>:<span class="number">26</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">86</span>]ï¼šsubscribe3 : <span class="number">2</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">17</span>:<span class="number">05</span>:<span class="number">26</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">86</span>]ï¼šsubscribe3 : <span class="number">3</span></div></pre></td></tr></table></figure>
<p>å¯ä»¥å‘ç°æ¯æ¬¡æ•°æ®éƒ½ä¼šé‡æ–°å‘å°„ä¸€éï¼Œæ˜¯ç‹¬ç«‹çš„ï¼Œå³ Observable ä¼šä¸ºæ¯ä¸ªè®¢é˜…è€…å•ç‹¬æ‰§è¡Œä¸€æ¬¡å‘å°„æ•°æ®çš„ä»£ç ã€‚</p>
<h3 id="Hot-Observables"><a href="#Hot-Observables" class="headerlink" title="Hot Observables"></a>Hot Observables</h3><p>æœ‰æ–°çš„äº‹ä»¶å®ƒå°±å‘å°„ï¼Œä¸è€ƒè™‘æ˜¯å¦æœ‰è®¢é˜…è€…è®¢é˜…ã€‚è€Œæ–°çš„è®¢é˜…è€…å¹¶ä¸ä¼šæ¥æ”¶åˆ°è®¢é˜…å‰å·²ç»å‘å°„è¿‡çš„äº‹ä»¶ã€‚</p>
<p>è¿™é‡Œæ€ä¹ˆç†è§£å‘¢ï¼ŸæŒ‰é’®çš„ç‚¹å‡»å°±æ˜¯ä¸ªç»å…¸çš„ ğŸŒ°ã€‚å±å¹•ä¸Šçš„ä¸€ä¸ªæŒ‰é’®ï¼Œä¸ç®¡æœ‰æ²¡æœ‰è®¢é˜…è€…è®¢é˜…å®ƒçš„ç‚¹å‡»äº‹ä»¶ï¼Œç‚¹å‡»äº‹ä»¶éƒ½ä¼šå‘ç”Ÿï¼Œæˆ‘ä»¬éƒ½èƒ½é€šè¿‡æ‰‹æŒ‡ç‚¹å‡»å±å¹•ä¸Šçš„æŒ‰é’®ã€‚å½“æœ‰è®¢é˜…è€…è®¢é˜…è¿™ä¸ªæŒ‰é’®åï¼Œæˆ‘ä»¬å°±èƒ½æ”¶åˆ°æŒ‰é’®ç‚¹å‡»äº‹ä»¶çš„åé¦ˆï¼Œä½†æ˜¯æ²¡è®¢é˜…ä¹‹å‰çš„å›è°ƒåé¦ˆæ˜¯æ²¡æœ‰çš„ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> tap = button.rx.tap</div><div class="line">tap.subscribe(onNext: &#123;</div><div class="line">    <span class="type">DebugPrint</span>(<span class="string">"Tap 1"</span>)</div><div class="line">&#125;).disposed(by: disposeBag)</div><div class="line"></div><div class="line"><span class="type">DispatchQueue</span>.main.asyncAfter(deadline: <span class="type">DispatchTime</span>.now() + <span class="number">3</span>) &#123;</div><div class="line">    tap.subscribe(onNext: &#123;</div><div class="line">        <span class="type">DebugPrint</span>(<span class="string">"Tap 2"</span>)</div><div class="line">    &#125;).disposed(by: <span class="keyword">self</span>.disposeBag)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ¯”å¦‚ 3 ç§’å‰ï¼Œæˆ‘ä»¬ç‚¹å‡»äº†ä¸‰æ¬¡ Button ï¼Œæ­¤ååˆç‚¹å‡»äº†ä¸¤æ¬¡ï¼Œæ€»å…±äº”æ¬¡æŒ‰é’®çš„ç‚¹å‡»ã€‚è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[2018-01-02 18:22:51 ViewController.swift viewDidLoad() 45]ï¼šTap 1</div><div class="line">[2018-01-02 18:22:52 ViewController.swift viewDidLoad() 45]ï¼šTap 1</div><div class="line">[2018-01-02 18:22:52 ViewController.swift viewDidLoad() 45]ï¼šTap 1</div><div class="line">[2018-01-02 18:22:56 ViewController.swift viewDidLoad() 45]ï¼šTap 1</div><div class="line">[2018-01-02 18:22:56 ViewController.swift viewDidLoad() 50]ï¼šTap 2</div><div class="line">[2018-01-02 18:22:56 ViewController.swift viewDidLoad() 45]ï¼šTap 1</div><div class="line">[2018-01-02 18:22:56 ViewController.swift viewDidLoad() 50]ï¼šTap 2</div></pre></td></tr></table></figure>
<p>3 ç§’å‰ç¬¬äºŒä¸ªè®¢é˜…è€…å¹¶æ²¡æœ‰è®¢é˜… tap ï¼Œæ•…ä¸ä¼šæœ‰ Tap 2 çš„è¾“å‡ºã€‚3 ç§’åç¬¬äºŒä¸ªè®¢é˜…è€…è®¢é˜…äº† tap ï¼Œæ­¤æ—¶ç‚¹å‡» Button ï¼Œå¯ä»¥çœ‹åˆ°æ‰“å°ç»“æœå¤šäº† Tap 2ã€‚ä½†ä¸ Cold Observable ä¸åŒçš„æ˜¯ï¼Œç¬¬äºŒä¸ªè®¢é˜…è€…ä¸ä¼šæ”¶åˆ°ä¹‹å‰ä¸‰æ¬¡çš„ç‚¹å‡»äº‹ä»¶ã€‚</p>
<p>æˆ‘ä»¬å¦‚æœå°† <code>button.rx.tap</code> æ›¿æ¢æˆ Cold Observablesï¼Œå¯ä»¥çœ‹åˆ°æ‰“å°ç»“æœæœ‰ 5 ä¸ª Tap 2 ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> tap = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; (observer) -&gt; <span class="type">Disposable</span> <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="number">1</span>)</div><div class="line">    observer.onNext(<span class="number">2</span>)</div><div class="line">    observer.onNext(<span class="number">3</span>)</div><div class="line">    observer.onNext(<span class="number">4</span>)</div><div class="line">    observer.onNext(<span class="number">5</span>)</div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">    &#125;.<span class="built_in">map</span>(&#123;<span class="number">_</span> <span class="keyword">in</span>&#125;)</div><div class="line">    </div><div class="line"><span class="comment">// è¾“å‡ºï¼š</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">18</span>:<span class="number">24</span>:<span class="number">43</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">47</span>]ï¼š<span class="type">Tap</span> <span class="number">1</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">18</span>:<span class="number">24</span>:<span class="number">43</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">47</span>]ï¼š<span class="type">Tap</span> <span class="number">1</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">18</span>:<span class="number">24</span>:<span class="number">43</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">47</span>]ï¼š<span class="type">Tap</span> <span class="number">1</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">18</span>:<span class="number">24</span>:<span class="number">43</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">47</span>]ï¼š<span class="type">Tap</span> <span class="number">1</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">18</span>:<span class="number">24</span>:<span class="number">43</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">47</span>]ï¼š<span class="type">Tap</span> <span class="number">1</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">18</span>:<span class="number">24</span>:<span class="number">46</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">52</span>]ï¼š<span class="type">Tap</span> <span class="number">2</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">18</span>:<span class="number">24</span>:<span class="number">46</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">52</span>]ï¼š<span class="type">Tap</span> <span class="number">2</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">18</span>:<span class="number">24</span>:<span class="number">46</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">52</span>]ï¼š<span class="type">Tap</span> <span class="number">2</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">18</span>:<span class="number">24</span>:<span class="number">46</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">52</span>]ï¼š<span class="type">Tap</span> <span class="number">2</span></div><div class="line">[<span class="number">2018</span>-<span class="number">01</span>-<span class="number">02</span> <span class="number">18</span>:<span class="number">24</span>:<span class="number">46</span> <span class="type">ViewController</span>.swift viewDidLoad() <span class="number">52</span>]ï¼š<span class="type">Tap</span> <span class="number">2</span></div></pre></td></tr></table></figure>
<p>å‚è€ƒï¼š</p>
<p><a href="https://beeth0ven.github.io/RxSwift-Chinese-Documentation/" target="_blank" rel="external">https://beeth0ven.github.io/RxSwift-Chinese-Documentation/</a><br><a href="https://medium.com/@DianQK/hot-observable%E5%92%8Ccold-observable-c3ba8d07867b" target="_blank" rel="external">https://medium.com/@DianQK/hot-observable%E5%92%8Ccold-observable-c3ba8d07867b</a><br><a href="https://juejin.im/entry/57f29c46da2f60004f68f663" target="_blank" rel="external">https://juejin.im/entry/57f29c46da2f60004f68f663</a><br><a href="https://github.com/ReactiveX/RxSwift/tree/master/Documentation" target="_blank" rel="external">https://github.com/ReactiveX/RxSwift/tree/master/Documentation</a><br><a href="https://github.com/Joe0708/RxSwift-Tutorial" target="_blank" rel="external">https://github.com/Joe0708/RxSwift-Tutorial</a></p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Archives</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1.0"><span class="toc-number">1.</span> <span class="toc-text"> ä»€ä¹ˆæ˜¯ RxSwift </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1.1"><span class="toc-number">2.</span> <span class="toc-text"> å“åº”å¼ç¼–ç¨‹ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1.2"><span class="toc-number">3.</span> <span class="toc-text"> RxSwift çš„æ ¸å¿ƒ </span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Observable-å¯è¢«è§‚å¯Ÿçš„åºåˆ—"><span class="toc-number">3.1.</span> <span class="toc-text">Observable - å¯è¢«è§‚å¯Ÿçš„åºåˆ—</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Observable-çš„ä¸‰ç§äº‹ä»¶"><span class="toc-number">3.1.1.</span> <span class="toc-text">Observable çš„ä¸‰ç§äº‹ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#åŸºæœ¬åˆ›å»ºæ–¹å¼"><span class="toc-number">3.1.2.</span> <span class="toc-text">åŸºæœ¬åˆ›å»ºæ–¹å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å°è£…å¥½æ“ä½œç¬¦åˆ›å»ºæ–¹å¼"><span class="toc-number">3.1.3.</span> <span class="toc-text">å°è£…å¥½æ“ä½œç¬¦åˆ›å»ºæ–¹å¼</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Observer-è§‚å¯Ÿè€…"><span class="toc-number">3.2.</span> <span class="toc-text">Observer - è§‚å¯Ÿè€…</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#åŸºæœ¬åˆ›å»ºæ–¹å¼-1"><span class="toc-number">3.2.1.</span> <span class="toc-text">åŸºæœ¬åˆ›å»ºæ–¹å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ä¸€äº›å°è£…"><span class="toc-number">3.2.2.</span> <span class="toc-text">ä¸€äº›å°è£…</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Subjects-æ—¢æ˜¯å¯è¢«ç›‘å¬çš„åºåˆ—ä¹Ÿæ˜¯è§‚å¯Ÿè€…"><span class="toc-number">3.3.</span> <span class="toc-text">Subjects - æ—¢æ˜¯å¯è¢«ç›‘å¬çš„åºåˆ—ä¹Ÿæ˜¯è§‚å¯Ÿè€…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Disposable-å¯è¢«æ¸…é™¤çš„èµ„æº"><span class="toc-number">3.4.</span> <span class="toc-text">Disposable - å¯è¢«æ¸…é™¤çš„èµ„æº</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Dispose"><span class="toc-number">3.4.1.</span> <span class="toc-text">Dispose</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DisposeBag"><span class="toc-number">3.4.2.</span> <span class="toc-text">DisposeBag</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#takeUntil"><span class="toc-number">3.4.3.</span> <span class="toc-text">takeUntil</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1.3"><span class="toc-number">4.</span> <span class="toc-text"> Hot and Cold Observables </span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Cold-Observables"><span class="toc-number">4.1.</span> <span class="toc-text">Cold Observables</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hot-Observables"><span class="toc-number">4.2.</span> <span class="toc-text">Hot Observables</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2018/01/02/RxSwift_1/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2018/01/02/RxSwift_1/&text=RxSwift å…¥å‘-éœ€è¦çŸ¥é“çš„åŸºç¡€æ¦‚å¿µ"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2018/01/02/RxSwift_1/&title=RxSwift å…¥å‘-éœ€è¦çŸ¥é“çš„åŸºç¡€æ¦‚å¿µ"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2018/01/02/RxSwift_1/&is_video=false&description=RxSwift å…¥å‘-éœ€è¦çŸ¥é“çš„åŸºç¡€æ¦‚å¿µ"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=RxSwift å…¥å‘-éœ€è¦çŸ¥é“çš„åŸºç¡€æ¦‚å¿µ&body=Check out this article: http://yoursite.com/2018/01/02/RxSwift_1/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2018/01/02/RxSwift_1/&title=RxSwift å…¥å‘-éœ€è¦çŸ¥é“çš„åŸºç¡€æ¦‚å¿µ"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2018/01/02/RxSwift_1/&title=RxSwift å…¥å‘-éœ€è¦çŸ¥é“çš„åŸºç¡€æ¦‚å¿µ"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2018/01/02/RxSwift_1/&title=RxSwift å…¥å‘-éœ€è¦çŸ¥é“çš„åŸºç¡€æ¦‚å¿µ"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2018/01/02/RxSwift_1/&title=RxSwift å…¥å‘-éœ€è¦çŸ¥é“çš„åŸºç¡€æ¦‚å¿µ"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2018/01/02/RxSwift_1/&name=RxSwift å…¥å‘-éœ€è¦çŸ¥é“çš„åŸºç¡€æ¦‚å¿µ&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2018 ifelseboyxx
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Archives</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-86660611-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'ifelseboyxx';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


